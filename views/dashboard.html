<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rackoon Streaming</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="../css/modal.css">
  <link rel="stylesheet" href="../css/video-player.css">
  <link rel="stylesheet" href="../css/import-classification.css">
  <link rel="stylesheet" href="../css/series-modal.css">
  <link rel="stylesheet" href="../css/filters.css">
  <link rel="stylesheet" href="../css/file-manager.css">
  <link rel="stylesheet" href="../css/file-manager-new.css">
  <link rel="stylesheet" href="../css/watch-party.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Barre de navigation -->
  <nav class="navbar">
    <div class="navbar-left">
      <div class="logo">RACKOON</div>
      <div class="nav-links tabs-navigation" id="tabs-navigation">
        <a href="#accueil" class="nav-link tab-link active" data-tab="accueil">
          <i class="fas fa-home"></i>
          Accueil
        </a>
        <a href="#gestion-fichiers" class="nav-link tab-link" data-tab="gestion-fichiers">
          <i class="fas fa-folder-open"></i>
          Gestion des fichiers
        </a>
      </div>
    </div>
    <div class="user-controls">
      <button class="rackoon-live-btn" id="rackoon-live-btn" title="Mode Rackoon Live">
        <i class="fas fa-bolt"></i>
        <span>Rackoon Live</span>
      </button>
      <button class="rackoon-live-btn" id="watchparty-join-btn" title="Rejoindre une Watch Party">
        <i class="fas fa-user-plus"></i>
        <span>Watch Party</span>
      </button>
      <div class="user-profile">
        <span>Rackoon Streaming</span>
      </div>
    </div>
  </nav>

  <!-- Conteneur des sections avec swipe -->
  <div class="tabs-container" id="tabs-container">
    <!-- Section Accueil -->
    <div class="tab-section active" id="section-accueil" data-section="accueil">
  <!-- Contenu principal -->
  <main class="main-content">
    <!-- Zone de chargement -->
    <div class="loading-container" id="loading-container">
      <div class="status-message" id="status-message">Pr√™t √† rechercher des vid√©os</div>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
    </div>

    <!-- Section de recherche globale -->
    <div class="section-header">
      <h2 class="section-title">Ma M√©diath√®que</h2>
      <div class="filters-search-container">
        <div class="search-filter">
          <span class="search-icon">
            <i class="fas fa-search"></i>
          </span>
          <input type="text" id="filter-search" placeholder="Rechercher un titre...">
        </div>
        <!-- Nouveau bouton toggle Vue Sections/Global -->
        <button class="view-toggle-button" id="view-toggle-btn" data-view="global" title="Basculer l'affichage">
          <span class="view-icon">
            <i class="fas fa-list"></i>
          </span>
          <span class="view-label">Global</span>
        </button>
        <button class="sort-button" id="sort-btn">
          <span class="sort-icon">
            <i class="fas fa-sort-amount-down"></i>
          </span>
          Trier
        </button>
        <button class="filter-button" id="filter-btn">
          <span class="filter-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
          </span>
          Filtres
          <span class="filter-badge" id="filter-badge" style="display: none;">0</span>
        </button>
      </div>
    </div>

    <!-- Cat√©gories de m√©dias -->
    <div class="categories-container">

      <!-- Cat√©gorie Films -->
      <div class="media-category" id="films-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-film"></i>
            Films
          </h3>
          <span class="category-count" id="films-count">0</span>
        </div>
        <div class="media-grid" id="films-grid">
          <div class="empty-state">
            <span class="icon">üé¨</span>
            <p>Aucun film trouv√©.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie S√©ries -->
      <div class="media-category" id="series-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-tv"></i>
            S√©ries
          </h3>
          <span class="category-count" id="series-count">0</span>
        </div>
        <div class="media-grid" id="series-grid">
          <div class="empty-state">
            <span class="icon">üì∫</span>
            <p>Aucune s√©rie trouv√©e.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie Courts m√©trages -->
      <div class="media-category" id="shorts-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-video"></i>
            Courts m√©trages
          </h3>
          <span class="category-count" id="shorts-count">0</span>
        </div>
        <div class="media-grid" id="shorts-grid">
          <div class="empty-state">
            <span class="icon">üéûÔ∏è</span>
            <p>Aucun court m√©trage trouv√©.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie Autres -->
      <div class="media-category" id="others-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-folder"></i>
            Autres
          </h3>
          <span class="category-count" id="others-count">0</span>
        </div>
        <div class="media-grid" id="others-grid">
          <div class="empty-state">
            <span class="icon">üìÅ</span>
            <p>Aucun autre m√©dia trouv√©.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie Non tri√©s -->
      <div class="media-category" id="unsorted-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-question-circle"></i>
            Non tri√©s
          </h3>
          <span class="category-count" id="unsorted-count">0</span>
        </div>
        <div class="media-grid unsorted-grid" id="unsorted-grid">
          <div class="empty-state">
            <span class="icon">‚ùì</span>
            <p>Aucun fichier en attente de classification.</p>
          </div>
        </div>
      </div>

    </div>
  </main>
    </div>
    <!-- Fin Section Accueil -->

    <!-- Section Gestion de fichiers -->
    <div class="tab-section" id="section-gestion-fichiers" data-section="gestion-fichiers">
      <main class="main-content">
        <!-- Statistiques globales -->
        <div class="stats-container">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-video"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="total-files">0</div>
              <div class="stat-label">Fichiers totaux</div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-hdd"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="total-size">0 GB</div>
              <div class="stat-label">Taille totale</div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="total-duration">0h 0m</div>
              <div class="stat-label">Dur√©e totale</div>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-image"></i>
            </div>
            <div class="stat-content">
              <div class="stat-number" id="files-with-thumbnails">0</div>
              <div class="stat-label">Avec miniatures</div>
            </div>
          </div>
        </div>

        <!-- Filtres et recherche -->
        <div class="filters-section">
          <div class="search-container">
            <div class="search-input-wrapper">
              <i class="fas fa-search search-icon"></i>
              <input type="text" id="search-input" placeholder="Rechercher par nom ou chemin...">
            </div>
          </div>

          <div class="filter-controls">
            <select id="format-filter">
              <option value="">Tous les formats</option>
            </select>

            <select id="sort-filter">
              <option value="title">Trier par nom</option>
              <option value="size_bytes">Trier par taille</option>
              <option value="duration">Trier par dur√©e</option>
              <option value="last_scan">Trier par date</option>
            </select>

            <button id="toggle-view-btn" class="btn-secondary">
              <i class="fas fa-list"></i>
              Vue plate
            </button>

            <button id="expand-all-btn" class="btn-secondary">
              <i class="fas fa-plus-square"></i>
              Tout d√©plier
            </button>

            <button id="refresh-btn" class="btn-primary">
              <i class="fas fa-sync-alt"></i>
              Actualiser
            </button>

            <button id="clear-all-btn" class="btn-danger">
              <i class="fas fa-trash-alt"></i>
              Clear All
            </button>
          </div>
        </div>

        <!-- Tableau des fichiers -->
        <div class="files-section">
          <div class="files-header">
            <h2>Fichiers li√©s (<span id="files-count">0</span>)</h2>
            <div class="bulk-actions" id="bulk-actions" style="display: none;">
              <button id="select-all-btn" class="btn-secondary">Tout s√©lectionner</button>
              <button id="delete-selected-btn" class="btn-danger">Supprimer s√©lectionn√©s</button>
            </div>
          </div>

          <div class="files-table-container">
            <table class="files-table">
              <thead>
                <tr>
                  <th width="40">
                    <input type="checkbox" id="master-checkbox">
                  </th>
                  <th width="80">Aper√ßu</th>
                  <th>Nom</th>
                  <th width="120">Format</th>
                  <th width="100">Dur√©e</th>
                  <th width="100">Taille</th>
                  <th width="120">Statut</th>
                  <th width="120">Actions</th>
                </tr>
              </thead>
              <tbody id="files-table-body">
                <tr class="loading-row">
                  <td colspan="8">
                    <div class="loading-spinner">
                      <i class="fas fa-spinner fa-spin"></i>
                      Chargement des fichiers...
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </main>
    </div>
    <!-- Fin Section Gestion de fichiers -->
  </div>
  <!-- Fin conteneur des onglets -->

  <!-- Bouton d'action flottant -->
  <div class="floating-action" id="add-btn">
    <span class="plus-icon">+</span>
  </div>

  <!-- Menu flottant pour le scan -->
  <div class="floating-menu" id="scan-menu">
    <h3>Ajouter des m√©dias</h3>
    <div class="scan-actions">
      <button class="scan-btn" id="scan-folder-btn">
        <span class="icon"><i class="fas fa-folder-open"></i></span>
        Rechercher un dossier
      </button>
      <button class="scan-btn" id="scan-file-btn">
        <span class="icon"><i class="fas fa-file-video"></i></span>
        Rechercher un fichier
      </button>
    </div>
  </div>

  <!-- Sidebar de tri -->
  <div class="filters-sidebar" id="sort-sidebar">
    <div class="filters-sidebar-header">
      <h3>Tri</h3>
      <button class="filters-close-btn" id="sort-close-btn">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="filters-sidebar-body">
      <!-- Toggle de tri global A‚ÜíZ / Z‚ÜíA -->
      <div class="sort-toggle-section">
        <button class="sort-toggle-btn" id="sort-toggle-btn" data-order="asc">
          <i class="fas fa-sort-alpha-down"></i>
          <span>A ‚Üí Z</span>
        </button>
      </div>

      <div class="filters-divider"></div>

      <!-- Section Trier par -->
      <div class="filter-section">
        <h4 class="filter-section-title">
          <i class="fas fa-sort"></i>
          Trier par
        </h4>
        <div class="sort-options">
          <label class="sort-option">
            <input type="radio" name="sort-by" value="category" checked>
            <span>Cat√©gorie</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="sort-by" value="dateAdded">
            <span>Date d'ajout</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="sort-by" value="title">
            <span>Ordre alphab√©tique</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="sort-by" value="rating">
            <span>Note</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="sort-by" value="year">
            <span>Ann√©e</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="sort-by" value="duration">
            <span>Dur√©e</span>
          </label>
        </div>
      </div>
    </div>

    <div class="filters-sidebar-footer">
      <button class="filters-reset-btn" id="sort-reset-btn">
        <i class="fas fa-undo"></i>
        R√©initialiser
      </button>
    </div>
  </div>

  <!-- Sidebar de filtres -->
  <div class="filters-sidebar" id="filters-sidebar">
    <div class="filters-sidebar-header">
      <h3>Filtres</h3>
      <button class="filters-close-btn" id="filters-close-btn">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <div class="filters-sidebar-body">
      <!-- Section Type de m√©dia -->
      <div class="filter-section">
        <h4 class="filter-section-title">
          <i class="fas fa-film"></i>
          Type de m√©dia
        </h4>
        <div class="filter-checkboxes">
          <label class="filter-checkbox">
            <input type="checkbox" name="media-type" value="film" checked>
            <span>Films</span>
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" name="media-type" value="series" checked>
            <span>S√©ries</span>
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" name="media-type" value="short" checked>
            <span>Courts m√©trages</span>
          </label>
          <label class="filter-checkbox">
            <input type="checkbox" name="media-type" value="other" checked>
            <span>Autres</span>
          </label>
        </div>
      </div>

      <div class="filters-divider"></div>

      <!-- Section Genres -->
      <div class="filter-section">
        <h4 class="filter-section-title">
          <i class="fas fa-masks-theater"></i>
          Genres
        </h4>
        <div class="genre-search-container">
          <input type="text" class="genre-search-input" id="genre-search-input" placeholder="Rechercher un genre...">
        </div>
        <div class="filter-checkboxes" id="genre-checkboxes">
          <!-- Les genres seront ajout√©s dynamiquement -->
        </div>
      </div>

      <div class="filters-divider"></div>

      <!-- Section Ann√©e -->
      <div class="filter-section">
        <h4 class="filter-section-title">
          <i class="fas fa-calendar"></i>
          Ann√©e
        </h4>
        <div class="year-range-container">
          <div class="year-range-values">
            <span id="year-min-value">1900</span>
            <span>-</span>
            <span id="year-max-value">2030</span>
          </div>
          <div class="year-range-slider">
            <input type="range" id="year-min-slider" min="1900" max="2030" value="1900" step="1">
            <input type="range" id="year-max-slider" min="1900" max="2030" value="2030" step="1">
          </div>
        </div>
      </div>

      <div class="filters-divider"></div>

      <!-- Section Statut -->
      <div class="filter-section">
        <h4 class="filter-section-title">
          <i class="fas fa-eye"></i>
          Statut de visionnage
        </h4>
        <div class="sort-options">
          <label class="sort-option">
            <input type="radio" name="watch-status" value="all" checked>
            <span>Tous</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="watch-status" value="toWatch">
            <span>√Ä voir</span>
          </label>
          <label class="sort-option">
            <input type="radio" name="watch-status" value="watched">
            <span>D√©j√† vus</span>
          </label>
        </div>
      </div>

      <div class="filters-divider"></div>

      <!-- Section Note minimale -->
      <div class="filter-section">
        <h4 class="filter-section-title">
          <i class="fas fa-star"></i>
          Note minimale
        </h4>
        <div class="rating-stars-filter" id="rating-stars-filter">
          <span class="rating-star" data-rating="1"><i class="far fa-star"></i></span>
          <span class="rating-star" data-rating="2"><i class="far fa-star"></i></span>
          <span class="rating-star" data-rating="3"><i class="far fa-star"></i></span>
          <span class="rating-star" data-rating="4"><i class="far fa-star"></i></span>
          <span class="rating-star" data-rating="5"><i class="far fa-star"></i></span>
        </div>
        <div class="rating-label" id="rating-label">Aucune note minimale</div>
      </div>
    </div>

    <div class="filters-sidebar-footer">
      <button class="filters-reset-btn" id="filters-reset-btn">
        <i class="fas fa-undo"></i>
        R√©initialiser
      </button>
    </div>
  </div>

  <!-- Overlays sombres pour les sidebars -->
  <div class="filters-overlay" id="sort-overlay"></div>
  <div class="filters-overlay" id="filters-overlay"></div>

  <!-- Modals pour le gestionnaire de fichiers -->
  <!-- Modal de confirmation de suppression -->
  <div class="modal-overlay" id="delete-modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Confirmer la suppression</h3>
        <button class="modal-close" id="close-delete-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p id="delete-message">√ätes-vous s√ªr de vouloir supprimer ce fichier de la base de donn√©es ?</p>
        <p class="warning-text">‚ö†Ô∏è Cette action ne supprimera que l'entr√©e de la base de donn√©es, pas le fichier physique.</p>
      </div>
      <div class="modal-footer">
        <button id="cancel-delete-btn" class="btn-secondary">Annuler</button>
        <button id="confirm-delete-btn" class="btn-danger">Supprimer</button>
      </div>
    </div>
  </div>

  <!-- Modal de d√©tails du fichier -->
  <div class="modal-overlay" id="details-modal" style="display: none;">
    <div class="modal-content large">
      <div class="modal-header">
        <h3>D√©tails du fichier</h3>
        <button class="modal-close" id="close-details-modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="file-details-grid">
          <div class="detail-item">
            <label>Nom:</label>
            <span id="detail-title"></span>
          </div>
          <div class="detail-item">
            <label>Chemin:</label>
            <span id="detail-path" class="path-text"></span>
          </div>
          <div class="detail-item">
            <label>Format:</label>
            <span id="detail-format"></span>
          </div>
          <div class="detail-item">
            <label>Dur√©e:</label>
            <span id="detail-duration"></span>
          </div>
          <div class="detail-item">
            <label>Taille:</label>
            <span id="detail-size"></span>
          </div>
          <div class="detail-item">
            <label>Derni√®re analyse:</label>
            <span id="detail-last-scan"></span>
          </div>
          <div class="detail-item">
            <label>Miniature:</label>
            <span id="detail-thumbnail-status"></span>
          </div>
        </div>
        <div class="thumbnail-preview" id="thumbnail-preview">
          <img id="detail-thumbnail-img" alt="Miniature">
        </div>
      </div>
      <div class="modal-footer">
        <button id="close-details-btn" class="btn-primary">Fermer</button>
      </div>
    </div>
  </div>

  <!-- Modal de confirmation Clear All -->
  <div class="modal-overlay" id="clear-all-modal" style="display: none;">
    <div class="modal-content small-modal">
      <div class="modal-header">
        <h3>‚ö†Ô∏è Supprimer TOUS les m√©dias</h3>
        <button class="modal-close" id="close-clear-all-modal">&times;</button>
      </div>
      <div class="modal-body">
        <p><strong>ATTENTION : Cette action est irr√©versible !</strong></p>
        <p>Vous √™tes sur le point de supprimer <strong>TOUS</strong> les m√©dias de la base de donn√©es :</p>
        <ul>
          <li>üì∫ Tous les films et s√©ries</li>
          <li>üñºÔ∏è Toutes les miniatures</li>
          <li>üìä Toutes les m√©tadonn√©es</li>
          <li>‚≠ê Toutes les notes et statuts</li>
        </ul>
        <p class="warning-text">‚ö†Ô∏è Cette action ne supprimera que les donn√©es de l'application, pas les fichiers physiques sur votre disque.</p>
        <div class="confirmation-input" style="margin: 20px 0;">
          <label for="clear-confirmation">Tapez "CLEAR ALL" pour confirmer :</label>
          <input type="text" id="clear-confirmation" placeholder="CLEAR ALL" style="margin-top: 10px; padding: 8px; width: 100%; border: 1px solid #ccc; border-radius: 4px;">
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancel-clear-all-btn" class="btn-secondary">Annuler</button>
        <button id="confirm-clear-all-btn" class="btn-danger" disabled>Supprimer TOUT</button>
      </div>
    </div>
  </div>

    <!-- Template pour les cartes de films -->
    <template id="media-card-template">
      <div class="media-card" data-id="" data-title="">
        <div class="media-thumbnail-container">
          <img src="" alt="" class="media-thumbnail">
          <div class="play-overlay">
            <button class="play-btn" title="Lancer la lecture">
              <i class="fas fa-play"></i>
            </button>
          </div>
        </div>
        <div class="media-info">
          <div class="media-title-container">
            <h3 class="media-title"></h3>
            <div class="watch-top">
              <button class="btn-watch-toggle">√† voir</button>
            </div>
          </div>
          <div class="media-extended-info">
            <div class="media-duration">
              Dur√©e: <span class="duration-value"></span>
            </div>
            <div class="rating-container">
              <div class="stars-container">
                <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                <span class="star" data-value="5"><i class="fas fa-star"></i></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template>

  <!-- Modal de pr√©sentation du film -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="movie-modal" id="movie-modal">
      <button class="modal-close" id="modal-close">√ó</button>
      
      <!-- Mode visualisation -->
      <div class="view-mode" id="view-mode">
        <!-- Container unifi√© avec scroll unique -->
        <div class="unified-content">
          <!-- Sidebar avec affiche et √©valuation -->
          <div class="modal-sidebar">
            <!-- Affiche -->
            <div class="modal-poster">
              <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiMxZTNhNmQiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2ZmZiIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2Ij7wn46sIEZpbG08L3RleHQ+PC9zdmc+" alt="Poster du film" id="modal-poster">
              <div class="poster-overlay">
                <div class="poster-quick-info">Note : ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                <div class="poster-quick-info">Dur√©e : <span id="duration-quick">2h 35m</span></div>
              </div>
            </div>

            <!-- Syst√®me d'√©valuation sous l'affiche -->
            <div class="evaluation-section">
              <!-- Bouton Vu/√Ä voir -->
              <button class="btn-watch-toggle-modal" id="btn-watch-toggle-modal">√Ä voir</button>

              <!-- Syst√®me d'√©toiles progressif -->
              <div class="rating-compact">
                <div class="rating-title">Ma Note</div>
                <div class="rating-controls">
                  <div class="progressive-stars" id="progressive-stars">
                    <div class="stars-background">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                    <div class="stars-fill" id="stars-fill">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                    <div class="stars-overlay" id="stars-overlay"></div>
                  </div>
                  <input type="number" id="rating-input" class="rating-input" min="0" max="5" step="0.1" value="0" placeholder="0.0">
                </div>
              </div>

              <!-- √âditeur d'avis -->
              <div class="review-section">
                <div class="review-title">Mon Avis</div>
                <textarea class="review-input" id="review-input" placeholder="Partage ton avis sur ce film..." rows="3"></textarea>
                <button class="review-save-btn" id="review-save-btn">Sauvegarder</button>
              </div>
            </div>
          </div>

          <!-- Contenu principal -->
          <div class="modal-content">
          <div class="modal-header">
            <div class="title-section">
              <h2 class="modal-title" id="modal-title">Le Comte de Monte Cristo</h2>
              <div class="media-meta-line">
                <span class="media-category" id="media-category">Film</span>
                <span class="meta-separator">‚Ä¢</span>
                <span class="movie-year" id="movie-year">2024</span>
              </div>
            </div>
            <div class="action-buttons">
              <!-- Syst√®me de boutons extensibles -->
              <div class="edit-button-group" id="edit-button-group">
                <!-- Bouton annuler (gauche) -->
                <button class="edit-cancel-btn" id="edit-cancel-btn" style="display: none;">
                  <i class="fas fa-undo"></i>
                </button>

                <!-- Bouton principal (crayon) -->
                <button class="edit-button" id="edit-button">
                  <i class="fas fa-pencil-alt"></i>
                </button>

                <!-- Bouton sauvegarder (droite) -->
                <button class="edit-save-btn" id="edit-save-btn" style="display: none;">
                  <i class="fas fa-check"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="movie-meta">
            <div class="release-date" id="release-date"></div>
            <div class="duration" id="duration">2h 35m</div>
            <div class="decade" id="decade"></div>
          </div>

          <!-- Synopsis remont√© pour une meilleure logique de lecture -->
          <div class="synopsis">
            <h3 class="synopsis-title">Synopsis</h3>
            <div class="synopsis-content" id="synopsis-content"></div>
          </div>

          <!-- Tags d√©plac√©s avant les cr√©dits -->
          <div class="tags-container">
            <!-- Genres -->
            <div class="tag-category" id="genres-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-film"></i>
                <span class="tag-category-title">Genres</span>
              </div>
              <div class="tag-chips" id="genres-container"></div>
            </div>

            <!-- Ambiance/Mood -->
            <div class="tag-category" id="mood-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-heart"></i>
                <span class="tag-category-title">Ambiance</span>
              </div>
              <div class="tag-chips" id="mood-container"></div>
            </div>

            <!-- Technique -->
            <div class="tag-category" id="technical-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-cog"></i>
                <span class="tag-category-title">Technique</span>
              </div>
              <div class="tag-chips" id="technical-container"></div>
            </div>

            <!-- Personnel -->
            <div class="tag-category" id="personal-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-user"></i>
                <span class="tag-category-title">Personnel</span>
              </div>
              <div class="tag-chips" id="personal-container"></div>
            </div>
          </div>

          <!-- Cr√©dits apr√®s les tags -->
          <div class="movie-credits">
            <div class="director-section" id="director-section" style="display: none;">
              <span class="credit-label">R√©alisateur :</span>
              <span class="director-name" id="director-name"></span>
            </div>
            <div class="actors-section" id="actors-section" style="display: none;">
              <span class="credit-label">Acteurs :</span>
              <span class="actors-list" id="actors-list"></span>
            </div>
            <div class="franchise-section" id="franchise-section" style="display: none;">
              <span class="credit-label">Collection :</span>
              <span class="franchise-name" id="franchise-name"></span>
            </div>
            <div class="platform-section" id="platform-section" style="display: none;">
              <span class="credit-label">Plateforme :</span>
              <span class="platform-name" id="platform-name"></span>
            </div>
          </div>

          <!-- Section Visionnage -->
          <div class="viewing-stats">
            <h3 class="viewing-stats-title">Historique de Visionnage</h3>
            <div class="viewing-stats-content">
              <div class="stat-item" id="stat-watch-count" style="display: none;">
                <span class="stat-label">Regard√© :</span>
                <span class="stat-value" id="stat-watch-count-value">0 fois</span>
              </div>
              <div class="stat-item" id="stat-last-watched" style="display: none;">
                <span class="stat-label">Dernier visionnage :</span>
                <span class="stat-value" id="stat-last-watched-value"></span>
              </div>
              <div class="stat-item" id="stat-progress" style="display: none;">
                <span class="stat-label">Progression :</span>
                <span class="stat-value" id="stat-progress-value"></span>
                <div class="progress-bar-container">
                  <div class="progress-bar-fill" id="progress-bar-fill"></div>
                </div>
              </div>
              <div class="stat-item" id="stat-rating-personal" style="display: none;">
                <span class="stat-label">Ma note :</span>
                <span class="stat-value" id="stat-rating-personal-value"></span>
              </div>
            </div>
          </div>

          <!-- Informations techniques (d√©plac√©es en bas) -->
          <div class="technical-info">
            <h3 class="technical-info-title">Informations Techniques</h3>
            <div class="technical-info-content">
              <div class="tech-item" id="tech-quality" style="display: none;">
                <span class="tech-label">Qualit√© :</span>
                <span class="tech-value" id="tech-quality-value"></span>
              </div>
              <div class="tech-item" id="tech-filesize" style="display: none;">
                <span class="tech-label">Taille :</span>
                <span class="tech-value" id="tech-filesize-value"></span>
              </div>
              <div class="tech-item" id="tech-duration-precise" style="display: none;">
                <span class="tech-label">Dur√©e exacte :</span>
                <span class="tech-value" id="tech-duration-precise-value"></span>
              </div>
              <div class="tech-item" id="tech-codec" style="display: none;">
                <span class="tech-label">Codec :</span>
                <span class="tech-value" id="tech-codec-value"></span>
              </div>
              <div class="tech-item" id="tech-audio" style="display: none;">
                <span class="tech-label">Audio :</span>
                <span class="tech-value" id="tech-audio-value"></span>
              </div>
              <div class="tech-item" id="tech-language" style="display: none;">
                <span class="tech-label">Langue :</span>
                <span class="tech-value" id="tech-language-value"></span>
              </div>
              <div class="tech-item" id="tech-subtitles" style="display: none;">
                <span class="tech-label">Sous-titres :</span>
                <span class="tech-value" id="tech-subtitles-value"></span>
              </div>
              <div class="tech-item" id="tech-date-added" style="display: none;">
                <span class="tech-label">Ajout√© le :</span>
                <span class="tech-value" id="tech-date-added-value"></span>
              </div>
            </div>
          </div>

          <!-- Bouton flottant pour regarder le film -->
          <button class="btn-watch-film floating-watch-btn" id="btn-watch-film">
            <i class="fas fa-play"></i>
            <span>Regarder le film</span>
          </button>
          </div>

        </div>
      </div>
      
      <!-- ANCIEN SYST√àME SUPPRIM√â - Le mode √©dition se fait maintenant directement dans view-mode -->
      <!-- <div class="edit-mode" id="edit-mode" style="display: none;">
        <div class="modal-content">
          <!-- Titre du mode √©dition -->
          <div class="edit-header">
            <h2>Sortir du mode √©dition</h2>
          </div>
          
          <!-- Bouton de recherche sur TMDB -->
          <button class="tmdb-search-btn" id="tmdb-search-btn">
            <i class="fas fa-search"></i> Rechercher sur The Movie Database
          </button>
          
          <!-- Titre -->
          <div class="edit-section">
            <div class="edit-section-title">Nom</div>
            <div class="edit-field">
              <input type="text" id="edit-title-input" placeholder="Titre du film">
            </div>
          </div>
          
          <!-- Ann√©e et date de sortie -->
          <div class="edit-section">
            <div class="edit-section-title">Date de sortie</div>
            <div class="edit-field">
              <input type="date" id="edit-release-date" placeholder="Date de sortie">
            </div>
          </div>
          
          <!-- Genres -->
          <div class="edit-section">
            <div class="edit-section-title">Genres</div>
            <!-- Genres pr√©d√©finis -->
            <div class="edit-field genre-selection">
              <select class="genre-dropdown" id="genre-dropdown">
                <option value="">Choisir un genre</option>
                <option value="Action">Action</option>
                <option value="Aventure">Aventure</option>
                <option value="Animation">Animation</option>
                <option value="Com√©die">Com√©die</option>
                <option value="Crime">Crime</option>
                <option value="Documentaire">Documentaire</option>
                <option value="Drame">Drame</option>
                <option value="Famille">Famille</option>
                <option value="Fantastique">Fantastique</option>
                <option value="Histoire">Histoire</option>
                <option value="Horreur">Horreur</option>
                <option value="Musique">Musique</option>
                <option value="Myst√®re">Myst√®re</option>
                <option value="Romance">Romance</option>
                <option value="Science-Fiction">Science-Fiction</option>
                <option value="Thriller">Thriller</option>
                <option value="Guerre">Guerre</option>
                <option value="Western">Western</option>
              </select>
              <button class="add-genre-btn" id="add-predefined-genre">Ajouter</button>
            </div>
            
            <!-- Affichage des genres s√©lectionn√©s -->
            <div class="genres-edit" id="edit-genres-container">
              <!-- Les genres seront ajout√©s ici dynamiquement -->
            </div>
            
            <!-- Ajout de genres personnalis√©s -->
            <div class="add-genre-container">
              <input type="text" class="add-genre-input" id="custom-genre-input" placeholder="Genre personnalis√©">
              <button class="add-genre-btn" id="add-custom-genre">Ajouter</button>
            </div>
          </div>

          <!-- Syst√®me de tags avanc√© -->
          <div class="edit-section">
            <div class="edit-section-title">
              <i class="fas fa-tags"></i> Tags personnalis√©s
            </div>

            <!-- Tags par cat√©gories -->
            <div class="edit-tags-container">
              <!-- Ambiance/Mood Tags -->
              <div class="edit-tag-category">
                <div class="edit-tag-category-header">
                  <i class="fas fa-heart"></i>
                  <span>Ambiance</span>
                  <button class="add-tag-btn smart-add-btn" data-category="mood">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="edit-tag-chips" id="edit-mood-tags"></div>

                <!-- Nouveau syst√®me de dropdown intelligent -->
                <div class="smart-tag-dropdown" id="mood-dropdown" style="display: none;">
                  <div class="dropdown-search-container">
                    <input type="text" class="dropdown-search" placeholder="Rechercher ou cr√©er un tag...">
                    <button class="dropdown-create-btn" style="display: block;">
                      <i class="fas fa-plus"></i> Cr√©er nouveau tag
                    </button>
                  </div>
                  <div class="dropdown-tags-list">
                    <!-- Les tags existants appara√Ætront ici -->
                  </div>
                </div>
              </div>

              <!-- Technical Tags -->
              <div class="edit-tag-category">
                <div class="edit-tag-category-header">
                  <i class="fas fa-cog"></i>
                  <span>Technique</span>
                  <button class="add-tag-btn smart-add-btn" data-category="technical">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="edit-tag-chips" id="edit-technical-tags"></div>

                <!-- Nouveau syst√®me de dropdown intelligent -->
                <div class="smart-tag-dropdown" id="technical-dropdown" style="display: none;">
                  <div class="dropdown-search-container">
                    <input type="text" class="dropdown-search" placeholder="Rechercher ou cr√©er un tag...">
                    <button class="dropdown-create-btn" style="display: block;">
                      <i class="fas fa-plus"></i> Cr√©er nouveau tag
                    </button>
                  </div>
                  <div class="dropdown-tags-list">
                    <!-- Les tags existants appara√Ætront ici -->
                  </div>
                </div>
              </div>

              <!-- Personal Tags -->
              <div class="edit-tag-category">
                <div class="edit-tag-category-header">
                  <i class="fas fa-user"></i>
                  <span>Personnel</span>
                  <button class="add-tag-btn smart-add-btn" data-category="personal">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="edit-tag-chips" id="edit-personal-tags"></div>

                <!-- Nouveau syst√®me de dropdown intelligent -->
                <div class="smart-tag-dropdown" id="personal-dropdown" style="display: none;">
                  <div class="dropdown-search-container">
                    <input type="text" class="dropdown-search" placeholder="Rechercher ou cr√©er un tag...">
                    <button class="dropdown-create-btn" style="display: block;">
                      <i class="fas fa-plus"></i> Cr√©er nouveau tag
                    </button>
                  </div>
                  <div class="dropdown-tags-list">
                    <!-- Les tags existants appara√Ætront ici -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Image -->
          <div class="edit-section">
            <div class="edit-section-title">Image</div>
            <div class="image-upload-container">
              <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDMwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyMDAiIGZpbGw9IiMxZTNhNmQiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2ZmZiIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE2Ij7wn46sIEZpbG08L3RleHQ+PC9zdmc+" class="image-upload-preview" id="image-preview">
              <div class="image-upload-controls">
                <button class="image-upload-btn" id="upload-image-btn">Changer l'image</button>
              </div>
            </div>
          </div>
          
          <!-- Synopsis -->
          <div class="edit-section">
            <div class="edit-section-title">Synopsis</div>
            <div class="edit-field">
              <textarea id="edit-synopsis-input" placeholder="Synopsis du film"></textarea>
            </div>
          </div>
          
          <!-- Boutons d'action -->
          <button class="save-changes-btn" id="save-changes-btn">Enregistrer les modifications</button>
          <button class="exit-edit-mode" id="exit-edit-mode">Sortir du mode √©dition</button>
        </div>
      </div> -->
    </div>
  </div>
  </div>

  <!-- Modal de pr√©sentation des s√©ries -->
  <div class="modal-overlay" id="series-modal-overlay" style="display: none;">
    <div class="series-modal" id="series-modal">
      <button class="modal-close" id="series-modal-close">√ó</button>

      <!-- Mode visualisation -->
      <div class="view-mode" id="series-view-mode">
        <!-- Container unifi√© avec scroll unique -->
        <div class="unified-content">
          <!-- Sidebar avec affiche et √©valuation -->
          <div class="modal-sidebar">
            <!-- Affiche -->
            <div class="modal-poster">
              <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjQ1MCIgdmlld0JveD0iMCAwIDMwMCA0NTAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjMwMCIgaGVpZ2h0PSI0NTAiIGZpbGw9IiMxYTFhMWEiLz48dGV4dCB4PSI1MCUiIHk9IjUwJSIgZG9taW5hbnQtYmFzZWxpbmU9Im1pZGRsZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0cHgiPvCfk7o8L3RleHQ+PC9zdmc+" alt="Poster de la s√©rie" id="series-poster">
              <!-- Info saison/√©pisodes en haut √† gauche -->
              <div class="poster-info-overlay">
                <div class="poster-season-info" id="series-season-info">S1</div>
                <div class="poster-episode-info" id="series-episode-info-overlay">12 √©p.</div>
              </div>
              <div class="poster-overlay">
                <div class="poster-quick-info">Note : <span id="series-rating-quick">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span></div>
                <div class="poster-quick-info">Saisons : <span id="series-seasons-quick">1</span></div>
              </div>
            </div>

            <!-- Syst√®me d'√©valuation sous l'affiche -->
            <div class="evaluation-section">
              <!-- Bouton Vu/√Ä voir -->
              <button class="btn-watch-toggle-modal" id="btn-watch-toggle-series">√Ä voir</button>

              <!-- Syst√®me d'√©toiles progressif -->
              <div class="rating-compact">
                <div class="rating-title">Ma Note</div>
                <div class="rating-controls">
                  <div class="progressive-stars" id="series-progressive-stars">
                    <div class="stars-background">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                    <div class="stars-fill" id="series-stars-fill">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                    <div class="stars-overlay" id="series-stars-overlay"></div>
                  </div>
                  <input type="number" id="series-rating-input" class="rating-input" min="0" max="5" step="0.1" value="0" placeholder="0.0">
                </div>
              </div>

              <!-- √âditeur d'avis -->
              <div class="review-section">
                <div class="review-title">Mon Avis</div>
                <textarea class="review-input" id="series-review-input" placeholder="Partage ton avis sur cette s√©rie..." rows="3"></textarea>
                <button class="review-save-btn" id="series-review-save-btn">Sauvegarder</button>
              </div>
            </div>
          </div>

          <!-- Contenu principal -->
          <div class="modal-content">
          <div class="modal-header">
            <div class="title-section">
              <h2 class="modal-title" id="series-title">Titre de la s√©rie</h2>
              <div class="media-meta-line">
                <span class="media-category" id="series-category">S√©rie</span>
                <span class="meta-separator">‚Ä¢</span>
                <span class="movie-year" id="series-year">2024</span>
              </div>
            </div>
            <div class="action-buttons">
              <!-- Syst√®me de boutons extensibles -->
              <div class="edit-button-group" id="series-edit-button-group">
                <!-- Bouton annuler (gauche) -->
                <button class="edit-cancel-btn" id="series-edit-cancel-btn" style="display: none;">
                  <i class="fas fa-undo"></i>
                </button>

                <!-- Bouton principal (crayon) -->
                <button class="edit-button" id="series-edit-button">
                  <i class="fas fa-pencil-alt"></i>
                </button>

                <!-- Bouton sauvegarder (droite) -->
                <button class="edit-save-btn" id="series-edit-save-btn" style="display: none;">
                  <i class="fas fa-check"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="movie-meta">
            <div class="series-episode-count" id="series-episode-count">0 √©pisodes</div>
            <div class="decade" id="series-decade"></div>
          </div>

          <!-- Synopsis remont√© pour une meilleure logique de lecture -->
          <div class="synopsis">
            <h3 class="synopsis-title">Synopsis</h3>
            <div class="synopsis-content" id="series-synopsis-content">Aucune description disponible.</div>
          </div>

          <!-- Tags d√©plac√©s avant les cr√©dits -->
          <div class="tags-container">
            <!-- Genres -->
            <div class="tag-category" id="series-genres-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-film"></i>
                <span class="tag-category-title">Genres</span>
              </div>
              <div class="tag-chips" id="series-genres-container"></div>
            </div>

            <!-- Ambiance/Mood -->
            <div class="tag-category" id="series-mood-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-heart"></i>
                <span class="tag-category-title">Ambiance</span>
              </div>
              <div class="tag-chips" id="series-mood-container"></div>
            </div>

            <!-- Technique -->
            <div class="tag-category" id="series-technical-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-cog"></i>
                <span class="tag-category-title">Technique</span>
              </div>
              <div class="tag-chips" id="series-technical-container"></div>
            </div>

            <!-- Personnel -->
            <div class="tag-category" id="series-personal-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-user"></i>
                <span class="tag-category-title">Personnel</span>
              </div>
              <div class="tag-chips" id="series-personal-container"></div>
            </div>
          </div>

          <!-- Cr√©dits apr√®s les tags -->
          <div class="movie-credits">
            <div class="director-section" id="series-director-section" style="display: none;">
              <span class="credit-label">Cr√©ateur :</span>
              <span class="director-name" id="series-director-name"></span>
            </div>
            <div class="actors-section" id="series-actors-section" style="display: none;">
              <span class="credit-label">Acteurs principaux :</span>
              <span class="actors-list" id="series-actors-list"></span>
            </div>
            <div class="platform-section" id="series-platform-section" style="display: none;">
              <span class="credit-label">Plateforme :</span>
              <span class="platform-name" id="series-platform-name"></span>
            </div>
          </div>

          <!-- Liste des saisons et √©pisodes -->
          <div class="seasons-container" id="seasons-container">
            <!-- Les saisons seront ajout√©es dynamiquement -->
          </div>

          <!-- Section Visionnage -->
          <div class="viewing-stats">
            <h3 class="viewing-stats-title">Historique de Visionnage</h3>
            <div class="viewing-stats-content">
              <div class="stat-item" id="series-stat-watch-count" style="display: none;">
                <span class="stat-label">√âpisodes regard√©s :</span>
                <span class="stat-value" id="series-stat-watch-count-value">0 / 0</span>
              </div>
              <div class="stat-item" id="series-stat-last-watched" style="display: none;">
                <span class="stat-label">Dernier visionnage :</span>
                <span class="stat-value" id="series-stat-last-watched-value"></span>
              </div>
              <div class="stat-item" id="series-stat-rating-personal" style="display: none;">
                <span class="stat-label">Ma note :</span>
                <span class="stat-value" id="series-stat-rating-personal-value"></span>
              </div>
            </div>
          </div>

          <!-- Informations techniques (d√©plac√©es en bas) -->
          <div class="technical-info">
            <h3 class="technical-info-title">Informations Techniques</h3>
            <div class="technical-info-content">
              <div class="tech-item" id="series-tech-quality" style="display: none;">
                <span class="tech-label">Qualit√© :</span>
                <span class="tech-value" id="series-tech-quality-value"></span>
              </div>
              <div class="tech-item" id="series-tech-seasons" style="display: none;">
                <span class="tech-label">Saisons :</span>
                <span class="tech-value" id="series-tech-seasons-value"></span>
              </div>
              <div class="tech-item" id="series-tech-date-added" style="display: none;">
                <span class="tech-label">Ajout√© le :</span>
                <span class="tech-value" id="series-tech-date-added-value"></span>
              </div>
            </div>
          </div>

          <!-- Bouton flottant pour regarder la s√©rie -->
          <button class="btn-watch-film floating-watch-btn" id="btn-play-series">
            <i class="fas fa-play"></i>
            <span>Lire la s√©rie</span>
          </button>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les saisons -->
  <template id="season-template">
    <div class="season-section">
      <div class="season-header">
        <h3 class="season-title">Saison <span class="season-number"></span></h3>
        <span class="season-episode-count"></span>
      </div>
      <div class="episodes-grid">
        <!-- Les √©pisodes seront ajout√©s ici -->
      </div>
    </div>
  </template>

  <!-- Template pour les √©pisodes -->
  <template id="episode-template">
    <div class="episode-card" data-episode-id="">
      <div class="episode-thumbnail-container">
        <img class="episode-thumbnail" src="" alt="Miniature √©pisode">
        <div class="episode-duration"></div>
        <button class="episode-play-btn">
          <i class="fas fa-play"></i>
        </button>
      </div>
      <div class="episode-info">
        <div class="episode-number"></div>
        <div class="episode-title"></div>
        <div class="episode-meta">
          <span class="episode-date"></span>
        </div>
      </div>
    </div>
  </template>

  <!-- Modal de tri initial des m√©dias import√©s -->
  <div id="import-triage-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content">
      <div class="import-modal-header">
        <h2>Tri des m√©dias import√©s</h2>
        <span class="import-modal-count" id="triage-count">0 fichiers trouv√©s</span>
      </div>

      <div class="import-modal-body">
        <!-- Contr√¥les globaux pour le triage -->
        <div class="triage-global-controls">
          <div class="global-controls-section">
            <h4>Appliquer √† tous :</h4>
            <div class="global-controls-row">
              <div class="global-control-group">
                <label>Type de m√©dia</label>
                <div class="global-input-container">
                  <select class="form-control" id="global-triage-type">
                    <option value="">S√©lectionner un type</option>
                    <option value="film">üé¨ Film</option>
                    <option value="series">üì∫ S√©rie</option>
                    <option value="short">üéûÔ∏è Court m√©trage</option>
                    <option value="other">üìÅ Autre</option>
                    <option value="unsorted">‚ùì Non tri√©</option>
                  </select>
                  <button type="button" class="btn-small btn-primary" id="apply-global-triage-type">Appliquer</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Barre de gestion des s√©ries -->
        <div class="series-batch-control" id="series-batch-control" style="display: none;">
          <div class="series-batch-header">
            <h4>üì∫ Gestion group√©e des s√©ries</h4>
            <p>Appliquer une s√©rie √† tous les m√©dias en attente de s√©lection</p>
          </div>
          <div class="series-batch-controls">
            <div class="series-selector-group">
              <select id="batch-series-selector" class="batch-series-select">
                <option value="">S√©lectionner une s√©rie existante...</option>
              </select>
              <button type="button" class="btn-small btn-secondary new-series-batch-btn" id="new-series-batch-btn" title="Cr√©er une nouvelle s√©rie">
                <i class="fas fa-plus"></i> Nouvelle s√©rie
              </button>
            </div>
            <button type="button" class="btn-primary batch-apply-btn" id="batch-apply-series">
              Appliquer √† <span id="pending-series-count">0</span> m√©dias
            </button>
          </div>
        </div>

        <div class="import-table-container">
          <table class="import-table" id="triage-table">
            <thead>
              <tr>
                <th>Aper√ßu</th>
                <th>Nom du fichier</th>
                <th>Dur√©e</th>
                <th>Taille</th>
                <th>Type de m√©dia</th>
                <th>Mode de tri</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="triage-table-body">
              <!-- Les lignes seront ajout√©es dynamiquement -->
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-danger" id="cancel-import-btn">‚ùå Annuler l'import</button>
          <button class="btn-secondary" id="skip-all-triage-btn">Tout passer (m√©dias non tri√©s)</button>
          <button class="btn-primary" id="validate-triage-btn">Valider et continuer la classification</button>
        </div>
        <div class="import-progress" id="triage-progress" style="display: none;">
          <div class="progress-bar">
            <div class="progress-fill" id="triage-progress-fill"></div>
          </div>
          <span class="progress-text" id="triage-progress-text">Traitement en cours...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les lignes du tableau de tri -->
  <template id="triage-row-template">
    <tr class="import-row" data-file-index="">
      <td class="thumbnail-cell">
        <div class="file-thumbnail">
          <img src="" alt="" class="thumbnail-preview">
        </div>
      </td>
      <td class="filename-cell">
        <div class="filename-info">
          <span class="filename-title"></span>
          <span class="filename-path"></span>
        </div>
      </td>
      <td class="duration-cell">
        <span class="duration-value">--:--:--</span>
      </td>
      <td class="size-cell">
        <span class="size-value">-- MB</span>
      </td>
      <td class="type-cell">
        <select class="type-selector">
          <option value="unsorted">√Ä d√©finir plus tard</option>
          <option value="film">üé¨ Film</option>
          <option value="series">üì∫ S√©rie</option>
          <option value="short">üéûÔ∏è Court m√©trage</option>
          <option value="other">üìÅ Autre</option>
        </select>
      </td>
      <td class="sort-mode-cell">
        <div class="sort-mode-container">
          <input type="text" class="sort-mode-input" value="Non d√©fini" readonly disabled>
          <div class="series-fields" style="display: none;">
            <div class="series-name-row">
              <select class="series-name-selector">
                <option value="">S√©lectionner une s√©rie</option>
              </select>
              <button type="button" class="btn-small btn-primary new-series-btn" title="Cr√©er une nouvelle s√©rie">üÜï</button>
            </div>
            <div class="validation-error" style="display: none;">
              <span class="error-icon">‚ö†Ô∏è</span>
              <span class="error-text">Nom de s√©rie requis</span>
            </div>
          </div>
        </div>
      </td>
      <td class="actions-cell">
        <button class="btn-small btn-outline quick-skip" title="Passer ce fichier" data-action="skip">Passer</button>
      </td>
    </tr>
  </template>

  <!-- Modal Phase 1 : Tri par type - √Ä ajouter dans dashboard.html -->
  <div id="import-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content">
      <div class="import-modal-header">
        <h2>Classification des m√©dias import√©s</h2>
        <span class="import-modal-count" id="import-count">0 fichiers trouv√©s</span>
      </div>
      
      <div class="import-modal-body">
        <div class="import-table-container">
          <table class="import-table" id="import-table">
            <thead>
              <tr>
                <th>Aper√ßu</th>
                <th>Nom du fichier</th>
                <th>Dur√©e</th>
                <th>Taille</th>
                <th>Type</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="import-table-body">
              <!-- Les lignes seront ajout√©es dynamiquement -->
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-danger" id="cancel-classification-btn">‚ùå Annuler l'import</button>
          <button class="btn-secondary" id="skip-all-btn">Tout passer (non tri√©)</button>
          <button class="btn-primary" id="validate-import-btn">Valider la s√©lection</button>
        </div>
        <div class="import-progress" id="import-progress" style="display: none;">
          <div class="progress-bar">
            <div class="progress-fill" id="import-progress-fill"></div>
          </div>
          <span class="progress-text" id="import-progress-text">Enregistrement en cours...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les lignes du tableau -->
  <template id="import-row-template">
    <tr class="import-row" data-file-index="">
      <td class="thumbnail-cell">
        <div class="file-thumbnail">
          <img src="" alt="" class="thumbnail-preview">
        </div>
      </td>
      <td class="filename-cell">
        <div class="filename-info">
          <span class="filename-title"></span>
          <span class="filename-path"></span>
        </div>
      </td>
      <td class="duration-cell">
        <span class="duration-value">--:--:--</span>
      </td>
      <td class="size-cell">
        <span class="size-value">-- MB</span>
      </td>
      <td class="type-cell">
        <select class="type-selector">
          <option value="unsorted">√Ä d√©finir</option>
          <option value="film">üé¨ Film</option>
          <option value="series">üì∫ S√©rie</option>
          <option value="short">üéûÔ∏è Court m√©trage</option>
          <option value="other">üìÅ Autre</option>
        </select>
      </td>
      <td class="actions-cell">
        <button class="btn-small btn-outline quick-skip" title="Passer ce fichier">Passer</button>
      </td>
    </tr>
  </template>

  <!-- Modal Galerie : Classification en mode galerie -->
  <div id="gallery-classification-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content gallery-modal">
      <div class="import-modal-header">
        <button class="btn-back" id="back-to-triage-btn" title="Retour au tri">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h2>Classification des m√©dias</h2>
        <div class="gallery-stats">
          <span id="gallery-count">0 fichiers</span>
          <span class="separator">‚Ä¢</span>
          <span id="gallery-progress">0 classifi√©s</span>
        </div>
      </div>

      <div class="import-modal-body gallery-body">
        <div class="gallery-container" id="gallery-container">
          <!-- Les cartes de fichiers seront ajout√©es ici -->
        </div>
      </div>

      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="save-all-unsorted-btn">Tout enregistrer comme non tri√©s</button>
          <button class="btn-primary" id="finish-classification-btn">Terminer la classification</button>
          <button class="btn-danger" id="cancel-gallery-btn">
            <i class="fas fa-times"></i> Annuler l'import
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les cartes de la galerie -->
  <template id="gallery-card-template">
    <div class="gallery-card" data-file-index="">
      <div class="gallery-card-body">
        <!-- Titre (obligatoire) -->
        <div class="form-group">
          <label>üìù Titre *</label>
          <input type="text" class="form-control title-input" placeholder="Titre du m√©dia" required>
        </div>

        <!-- Champs pour les s√©ries (masqu√©s par d√©faut) -->
        <div class="series-fields" style="display: none;">
          <div class="form-group">
            <label>üì∫ S√©rie</label>
            <input type="text" class="form-control series-name-readonly" readonly>
          </div>

          <!-- Saison (auto via drag&drop) -->
          <div class="form-group">
            <label>üé¨ Saison</label>
            <input type="text" class="form-control season-display" readonly placeholder="--">
          </div>

          <!-- √âpisode (auto via drag&drop) -->
          <div class="form-group">
            <label>üì∫ √âpisode</label>
            <input type="text" class="form-control episode-display" readonly placeholder="--">
          </div>

          <!-- Dur√©e pour les √©pisodes -->
          <div class="form-group">
            <label>‚è±Ô∏è Dur√©e</label>
            <input type="text" class="form-control duration-display" readonly placeholder="--:--">
          </div>
        </div>

        <!-- Champs pour les m√©dias uniques (films, etc.) -->
        <div class="unique-fields">
          <!-- Ann√©e -->
          <div class="form-group">
            <label>üìÖ Ann√©e</label>
            <input type="number" class="form-control year-input" placeholder="2024" min="1900" max="2030">
          </div>

          <!-- Genres (pastilles avec dropdown) -->
          <div class="form-group">
            <label>üé≠ Genres</label>
            <div class="genres-tags-container">
              <!-- Les pastilles de genres s√©lectionn√©s appara√Ætront ici -->
              <div class="genres-tags-list"></div>

              <!-- Bouton + avec dropdown -->
              <div class="genre-add-dropdown">
                <button type="button" class="genre-add-btn">+ Ajouter</button>
                <div class="genre-dropdown-menu">
                  <div class="genre-dropdown-option" data-genre="Action">Action</div>
                  <div class="genre-dropdown-option" data-genre="Aventure">Aventure</div>
                  <div class="genre-dropdown-option" data-genre="Com√©die">Com√©die</div>
                  <div class="genre-dropdown-option" data-genre="Drame">Drame</div>
                  <div class="genre-dropdown-option" data-genre="Horreur">Horreur</div>
                  <div class="genre-dropdown-option" data-genre="Thriller">Thriller</div>
                  <div class="genre-dropdown-option" data-genre="Romance">Romance</div>
                  <div class="genre-dropdown-option" data-genre="Science-fiction">Science-fiction</div>
                  <div class="genre-dropdown-option" data-genre="Fantasy">Fantasy</div>
                  <div class="genre-dropdown-option" data-genre="Animation">Animation</div>
                  <div class="genre-dropdown-option" data-genre="Documentaire">Documentaire</div>
                  <div class="genre-dropdown-option" data-genre="Guerre">Guerre</div>
                  <div class="genre-dropdown-option" data-genre="Western">Western</div>
                  <div class="genre-dropdown-option" data-genre="Crime">Crime</div>
                  <div class="genre-dropdown-option" data-genre="Myst√®re">Myst√®re</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Description courte -->
          <div class="form-group">
            <label>üìñ Description (facultatif)</label>
            <textarea class="form-control description-input" placeholder="R√©sum√© en 1-2 phrases..." rows="2" maxlength="200"></textarea>
          </div>

          <!-- Section avanc√©e (cach√©e par d√©faut) -->
          <details class="advanced-section">
            <summary>‚ûï Plus d'options</summary>
            <div class="advanced-fields">
              <!-- R√©alisateur -->
              <div class="form-group">
                <label>üé¨ R√©alisateur</label>
                <input type="text" class="form-control director-input" placeholder="Christopher Nolan">
              </div>

              <!-- Acteurs principaux -->
              <div class="form-group">
                <label>üë• Acteurs principaux (s√©par√©s par des virgules)</label>
                <input type="text" class="form-control actors-input" placeholder="Leonardo DiCaprio, Tom Hardy">
              </div>

              <!-- Franchise -->
              <div class="form-group">
                <label>üè¢ Franchise/Collection</label>
                <input type="text" class="form-control franchise-input" placeholder="Marvel, Star Wars, etc.">
              </div>

              <!-- Poster personnalis√© -->
              <div class="form-group">
                <label>üì∏ Poster (URL)</label>
                <input type="url" class="form-control poster-input" placeholder="https://example.com/poster.jpg">
              </div>
            </div>
          </details>
        </div>
      </div>
    </div>
  </template>

  <!-- Modal Phase 2 : Classification d√©taill√©e (s√©ries, m√©tadonn√©es) -->
  <div id="details-classification-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content details-modal">
      <div class="import-modal-header">
        <h2>Classification d√©taill√©e</h2>
        <div class="file-info">
          <span id="detail-file-name">Nom du fichier</span>
        </div>
      </div>
      
      <div class="import-modal-body details-body">
        <div class="details-form">
          <div class="form-row">
            <div class="form-group">
              <label for="detail-title">Titre *</label>
              <input type="text" id="detail-title" class="form-control" placeholder="Titre du m√©dia" required>
            </div>
            <div class="form-group">
              <label for="detail-category">Cat√©gorie *</label>
              <select id="detail-category" class="form-control" required>
                <option value="">S√©lectionner une cat√©gorie</option>
              </select>
            </div>
          </div>

          <div class="form-row" id="series-section" style="display: none;">
            <div class="form-group">
              <label for="detail-series-name">S√©rie</label>
              <input type="text" id="detail-series-name" class="form-control series-readonly" readonly>
              <small class="form-hint">üì∫ S√©rie d√©finie lors du tri initial (non modifiable)</small>
            </div>
            <div class="form-group">
              <label for="detail-season">Saison</label>
              <input type="number" id="detail-season" class="form-control" placeholder="1" min="1">
            </div>
            <div class="form-group">
              <label for="detail-episode">√âpisode</label>
              <input type="number" id="detail-episode" class="form-control" placeholder="1" min="1">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="detail-year">Ann√©e</label>
              <input type="number" id="detail-year" class="form-control" placeholder="2023" min="1900" max="2030">
            </div>
            <div class="form-group">
              <label for="detail-release-date">Date de sortie</label>
              <input type="date" id="detail-release-date" class="form-control">
            </div>
          </div>

          <div class="form-group">
            <label for="detail-description">Description</label>
            <textarea id="detail-description" class="form-control" rows="3" placeholder="Description du m√©dia (optionnel)"></textarea>
          </div>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="skip-file-btn">Passer ce fichier</button>
          <div class="navigation-buttons">
            <button class="btn-outline" id="prev-file-btn" title="Fichier pr√©c√©dent">‚Üê Pr√©c√©dent</button>
            <button class="btn-primary" id="save-file-btn">Enregistrer</button>
            <button class="btn-outline" id="next-file-btn" title="Fichier suivant">Suivant ‚Üí</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal pour nouvelle s√©rie -->
  <!-- Modal de confirmation d'annulation -->
  <div id="cancel-confirmation-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content small-modal">
      <div class="import-modal-header">
        <h2>‚ö†Ô∏è Confirmer l'annulation</h2>
      </div>

      <div class="import-modal-body">
        <p>√ätes-vous s√ªr de vouloir annuler compl√®tement l'import des m√©dias ?</p>
        <p><strong>Cette action arr√™tera le processus d'import et annulera tous les m√©dias s√©lectionn√©s.</strong></p>
      </div>

      <div class="import-modal-footer">
        <button class="btn-secondary" id="cancel-confirmation-no">Non, continuer</button>
        <button class="btn-danger" id="cancel-confirmation-yes">Oui, annuler l'import</button>
      </div>
    </div>
  </div>

  <div id="new-series-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content small-modal">
      <div class="import-modal-header">
        <h3>Cr√©er une nouvelle s√©rie</h3>
      </div>
      
      <div class="import-modal-body">
        <div class="form-group">
          <label for="new-series-name">Nom de la s√©rie *</label>
          <input type="text" id="new-series-name" class="form-control" placeholder="Ex: Breaking Bad" required>
        </div>
        <div class="form-group">
          <label for="new-series-description">Description</label>
          <textarea id="new-series-description" class="form-control" rows="2" placeholder="Description de la s√©rie (optionnel)"></textarea>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="cancel-series-btn">Annuler</button>
          <button class="btn-primary" id="create-series-btn">Cr√©er</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de gestion des saisons -->
  <div id="seasons-manager-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content seasons-modal">
      <div class="import-modal-header">
        <button class="btn-back" id="close-seasons-manager" title="Fermer">
          <i class="fas fa-times"></i>
        </button>
        <h2><i class="fas fa-layer-group"></i> Gestion des saisons</h2>
        <div class="series-info">
          <span id="seasons-series-name">Nom de la s√©rie</span>
        </div>
      </div>

      <div class="import-modal-body seasons-body">
        <!-- Vue d'ensemble des saisons -->
        <div class="seasons-overview">
          <div class="seasons-header-actions">
            <h3>Saisons (<span id="seasons-count">0</span>)</h3>
            <button class="btn-primary btn-small" id="add-season-btn">
              <i class="fas fa-plus"></i> Ajouter une saison
            </button>
          </div>

          <!-- Liste des saisons -->
          <div class="seasons-list" id="seasons-list">
            <!-- Les saisons seront ajout√©es ici dynamiquement -->
            <div class="no-seasons-message">
              <i class="fas fa-inbox"></i>
              <p>Aucune saison cr√©√©e</p>
              <p class="hint">Cliquez sur "Ajouter une saison" pour commencer</p>
            </div>
          </div>
        </div>

        <!-- Zone d'√©dition de saison -->
        <div class="season-editor" id="season-editor" style="display: none;">
          <div class="editor-header">
            <h3 id="editor-title">Nouvelle saison</h3>
            <button class="btn-icon" id="close-editor" title="Fermer l'√©diteur">
              <i class="fas fa-times"></i>
            </button>
          </div>

          <div class="editor-content">
            <!-- Informations de la saison -->
            <div class="form-group">
              <label>Type de saison *</label>
              <div class="season-type-selector">
                <label class="radio-option">
                  <input type="radio" name="season-type" value="standard" checked>
                  <span class="radio-label">
                    <i class="fas fa-list-ol"></i>
                    <strong>Saison classique</strong>
                    <small>Saison 1, Saison 2, etc.</small>
                  </span>
                </label>
                <label class="radio-option">
                  <input type="radio" name="season-type" value="custom">
                  <span class="radio-label">
                    <i class="fas fa-edit"></i>
                    <strong>Saison personnalis√©e</strong>
                    <small>OAV, Sp√©ciaux, Hors s√©rie, etc.</small>
                  </span>
                </label>
              </div>
            </div>

            <!-- Num√©ro de saison (pour type standard) -->
            <div class="form-group" id="standard-season-group">
              <label for="season-number-standard">Num√©ro de saison *</label>
              <input type="number" id="season-number-standard" class="form-control" min="1" placeholder="1" required>
              <small class="form-hint">Le nom sera automatiquement "Saison X"</small>
            </div>

            <!-- Nom personnalis√© (pour type custom) -->
            <div class="form-group" id="custom-season-group" style="display: none;">
              <label for="season-custom-name">Nom de la saison *</label>
              <input type="text" id="season-custom-name" class="form-control" placeholder="Ex: OAV, Sp√©ciaux, Hors s√©rie...">
            </div>

            <!-- Num√©ro d'ordre (commun aux deux types) -->
            <div class="form-group">
              <label for="season-order">Num√©ro d'ordre * (1-1000)</label>
              <input type="number" id="season-order" class="form-control" min="1" max="1000" placeholder="1" required>
              <small class="form-hint">
                <i class="fas fa-info-circle"></i>
                D√©finit l'ordre d'affichage des saisons (peut avoir des trous: 1, 42, 100...)
              </small>
            </div>

            <!-- D√©finition du nombre d'√©pisodes -->
            <div class="episodes-definition">
              <h4>√âpisodes de cette saison</h4>

              <div class="episodes-range-section">
                <label>Plage d'√©pisodes</label>
                <div class="range-inputs">
                  <span class="range-label">De l'√©pisode</span>
                  <input type="number" id="episode-from" class="form-control small" min="1" value="1">
                  <span class="range-label">√† l'√©pisode</span>
                  <input type="number" id="episode-to" class="form-control small" min="1" placeholder="12">
                </div>
                <small class="form-hint">
                  <i class="fas fa-info-circle"></i>
                  D√©finit le nombre d'emplacements d'√©pisodes pour cette saison. L'assignation des fichiers se fera plus tard.
                </small>
              </div>
            </div>

            <!-- Actions -->
            <div class="editor-actions">
              <button class="btn-danger" id="delete-season-btn" style="display: none;">
                <i class="fas fa-trash"></i> Supprimer la saison
              </button>
              <div class="right-actions">
                <button class="btn-secondary" id="cancel-season-btn">Annuler</button>
                <button class="btn-primary" id="save-season-btn">
                  <i class="fas fa-save"></i> Enregistrer
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="import-modal-footer">
        <div class="footer-info">
          <i class="fas fa-info-circle"></i>
          <span>Les saisons organisent vos √©pisodes. Vous pouvez cr√©er, modifier et supprimer des saisons √† tout moment.</span>
        </div>
        <button class="btn-primary" id="finish-seasons-btn">
          <i class="fas fa-check"></i> Terminer
        </button>
      </div>
    </div>
  </div>

  <!-- CSS pour la modal -->
  <style>
  .import-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .import-modal-content {
    background-color: #081029;
    border-radius: 15px;
    width: 95%;
    max-width: 1400px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .import-modal-header {
    padding: 25px 30px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .import-modal-header h2 {
    color: #ffffff;
    font-size: 24px;
    font-weight: 600;
    margin: 0;
  }

  .import-modal-count {
    color: #b0b0b0;
    font-size: 14px;
    background-color: rgba(255, 255, 255, 0.1);
    padding: 6px 12px;
    border-radius: 12px;
  }

  .import-modal-body {
    flex: 1;
    overflow: hidden;
    padding: 20px 30px;
  }

  .import-table-container {
    height: 100%;
    overflow-y: auto;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .import-table {
    width: 100%;
    border-collapse: collapse;
    background-color: rgba(255, 255, 255, 0.05);
  }

  .import-table th {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    font-weight: 600;
    padding: 15px 12px;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .import-table td {
    padding: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    color: #e0e0e0;
  }

  .import-row:hover {
    background-color: rgba(255, 255, 255, 0.05);
  }

  .file-thumbnail {
    width: 60px;
    height: 40px;
    border-radius: 4px;
    overflow: hidden;
    background-color: #2a2a3e;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .thumbnail-preview {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .filename-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .filename-title {
    font-weight: 500;
    color: #ffffff;
  }

  .filename-path {
    font-size: 12px;
    color: #a0a0a0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 200px;
  }

  .type-selector {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    min-width: 140px;
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 16px;
    padding-right: 32px;
  }

  .type-selector:focus {
    outline: none;
    border-color: #3474db;
  }

  .type-selector option {
    background-color: #1a1f35 !important;
    background: #1a1f35 !important;
    color: #ffffff !important;
    padding: 8px 12px;
    font-weight: 500;
  }

  .type-selector option:hover,
  .type-selector option:checked,
  .type-selector option:focus {
    background-color: #2a3350 !important;
    background: linear-gradient(#2a3350, #2a3350) !important;
    color: #ffffff !important;
  }

  .btn-small {
    padding: 6px 12px;
    font-size: 12px;
    border-radius: 4px;
    cursor: pointer;
    border: none;
    transition: all 0.3s;
  }

  .btn-outline {
    background-color: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
  }

  .btn-outline:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  .import-modal-footer {
    padding: 25px 30px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .import-actions {
    display: flex;
    gap: 15px;
  }

  .btn-secondary {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .btn-secondary:hover {
    background-color: rgba(255, 255, 255, 0.15);
  }

  .btn-primary {
    background-color: #3474db;
    color: #ffffff;
    border: none;
    padding: 10px 25px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
  }

  .btn-primary:hover {
    background-color: #2a5db3;
  }

  .import-progress {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .progress-bar {
    width: 200px;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background-color: #3474db;
    width: 0%;
    transition: width 0.3s ease;
  }

  .progress-text {
    color: #b0b0b0;
    font-size: 14px;
    white-space: nowrap;
  }

  /* Styles pour les nouveaux champs de tri */
  .sort-mode-cell {
    min-width: 180px;
    vertical-align: top;
  }

  .sort-mode-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .sort-mode-input {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 13px;
    cursor: not-allowed;
  }

  .sort-mode-input:disabled {
    opacity: 0.7;
    background-color: rgba(255, 255, 255, 0.03);
  }

  .series-fields {
    margin-top: 8px;
    padding: 10px;
    background-color: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .series-name-row {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 8px;
  }

  .series-name-selector {
    flex: 1;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 13px;
    cursor: pointer;
  }

  .series-name-selector:focus {
    outline: none;
    border-color: #3474db;
  }

  .series-name-selector option {
    background-color: #081029;
    color: #ffffff;
  }

  .new-series-btn {
    padding: 6px 10px;
    font-size: 12px;
    white-space: nowrap;
  }

  .series-selector-group {
    display: flex;
    gap: 10px;
    align-items: center;
    flex: 1;
  }

  .batch-series-select {
    flex: 1;
    min-width: 200px;
  }

  .new-series-batch-btn {
    padding: 8px 12px;
    font-size: 13px;
    white-space: nowrap;
    background-color: #6c757d;
    border: 1px solid #5a6268;
  }

  .new-series-batch-btn:hover {
    background-color: #5a6268;
    border-color: #4e555b;
  }

  .validation-error {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #ff6b6b;
    font-size: 12px;
    font-weight: 500;
  }

  .error-icon {
    font-size: 14px;
  }

  .error-text {
    flex: 1;
  }

  /* Animation de vibration pour les erreurs */
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }

  .import-row.error-shake {
    animation: shake 0.5s ease-in-out;
  }

  .import-row.error-highlight {
    background-color: rgba(255, 107, 107, 0.1);
    border-left: 3px solid #ff6b6b;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .import-modal-content {
      width: 98%;
      max-height: 95vh;
    }
    
    .import-table {
      font-size: 14px;
    }
    
    .filename-path {
      max-width: 150px;
    }
  }

  @media (max-width: 768px) {
    .import-modal-header {
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }
    
    .import-modal-footer {
      flex-direction: column;
      gap: 15px;
      align-items: stretch;
    }
    
    .import-actions {
      justify-content: center;
    }
  }

  /* Styles pour la modal de classification d√©taill√©e */
  .details-modal {
    max-width: 800px;
  }

  .details-body {
    overflow-y: auto;
  }

  .details-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .form-row.three-columns {
    grid-template-columns: 1fr 1fr 1fr;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-group label {
    color: #ffffff;
    font-size: 14px;
    font-weight: 500;
  }

  .form-control {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 10px 12px;
    color: #ffffff;
    font-size: 14px;
    transition: all 0.3s;
  }

  .form-control option {
    background-color: #1a1f35;
    color: #ffffff;
    padding: 8px 12px;
  }

  .form-control:focus {
    outline: none;
    border-color: #3474db;
    background-color: rgba(255, 255, 255, 0.15);
  }

  .form-control::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }

  .series-input-container {
    display: flex;
    gap: 10px;
    align-items: flex-end;
  }

  .series-input-container .form-control {
    flex: 1;
  }

  .file-info {
    background-color: rgba(255, 255, 255, 0.1);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    color: #b0b0b0;
  }

  #series-section {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 20px;
    margin-top: 10px;
  }

  .small-modal {
    max-width: 500px;
  }

  .btn-small {
    padding: 6px 12px;
    font-size: 12px;
    white-space: nowrap;
  }

  .btn-outline {
    background-color: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
  }

  .btn-outline:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
  }

  /* Styles pour les boutons de navigation */
  .navigation-buttons {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  #prev-file-btn, #next-file-btn {
    padding: 8px 16px;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background-color: transparent;
    color: #ffffff;
  }

  #prev-file-btn:hover, #next-file-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
  }

  #prev-file-btn:disabled, #next-file-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: transparent;
    border-color: rgba(255, 255, 255, 0.1);
  }

  #prev-file-btn:disabled:hover, #next-file-btn:disabled:hover {
    background-color: transparent;
    border-color: rgba(255, 255, 255, 0.1);
  }

  /* Styles pour la modal galerie */
  .gallery-modal {
    max-width: 95vw;
    max-height: 95vh;
  }

  .gallery-stats {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #b0b0b0;
    font-size: 14px;
  }

  .separator {
    color: rgba(255, 255, 255, 0.3);
  }

  .gallery-body {
    overflow-y: auto;
    max-height: 70vh;
  }

  /* Contr√¥les globaux (galerie et triage) */
  .gallery-global-controls,
  .triage-global-controls {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 20px;
    margin: 20px 20px 25px 20px;
    position: sticky;
    top: 0;
    z-index: 10;
    backdrop-filter: blur(10px);
  }

  .global-controls-section h4 {
    color: #ffffff;
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .global-controls-section h4::before {
    content: "‚ö°";
    font-size: 18px;
  }

  .global-controls-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    align-items: end;
  }

  .global-control-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .global-control-group label {
    color: #ffffff;
    font-size: 13px;
    font-weight: 500;
  }

  .global-input-container {
    display: flex;
    gap: 8px;
    align-items: stretch;
  }

  .global-input-container .form-control {
    flex: 1;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    padding: 8px 10px;
    color: #ffffff;
    font-size: 13px;
  }

  .global-input-container .form-control:focus {
    outline: none;
    border-color: #3474db;
    background-color: rgba(255, 255, 255, 0.15);
  }

  .global-input-container .btn-small {
    padding: 8px 12px;
    font-size: 12px;
    white-space: nowrap;
    border-radius: 4px;
    font-weight: 500;
  }

  .gallery-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
    padding: 20px;
  }

  .gallery-card {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s;
    position: relative;
  }

  .gallery-card:hover {
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }

  .gallery-card-header {
    position: relative;
    height: 120px;
    background-color: rgba(255, 255, 255, 0.02);
  }

  .file-preview {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .preview-image {
    width: 80px;
    height: 60px;
    object-fit: cover;
    border-radius: 6px;
    opacity: 0.7;
  }

  .file-info-overlay {
    position: absolute;
    bottom: 8px;
    left: 8px;
    right: 8px;
    background-color: rgba(0, 0, 0, 0.7);
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 12px;
  }

  .file-name {
    display: block;
    color: #ffffff;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .file-duration {
    display: block;
    color: #b0b0b0;
    font-size: 11px;
  }

  .file-category-badge {
    position: absolute;
    top: 8px;
    right: 8px;
  }

  .category-badge {
    background-color: rgba(52, 116, 219, 0.9);
    color: #ffffff;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    white-space: nowrap;
  }

  .category-badge.series {
    background-color: rgba(220, 53, 69, 0.9);
  }

  .category-badge.film {
    background-color: rgba(40, 167, 69, 0.9);
  }

  .category-badge.short {
    background-color: rgba(255, 193, 7, 0.9);
    color: #000;
  }

  .category-badge.other {
    background-color: rgba(108, 117, 125, 0.9);
  }

  .gallery-card-body {
    padding: 16px;
  }

  .gallery-card .form-group {
    margin-bottom: 12px;
  }

  .gallery-card .form-group label {
    display: block;
    color: #ffffff;
    font-size: 12px;
    font-weight: 500;
    margin-bottom: 4px;
  }

  .gallery-card .form-control {
    width: 100%;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    padding: 6px 8px;
    color: #ffffff;
    font-size: 13px;
  }

  .gallery-card .form-control:focus {
    outline: none;
    border-color: #3474db;
    background-color: rgba(255, 255, 255, 0.15);
  }

  .form-group-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .series-input-container {
    display: flex;
    gap: 6px;
    align-items: flex-end;
  }

  .series-input-container .form-control {
    flex: 1;
  }

  .series-input-container .btn-small {
    padding: 6px 8px;
    font-size: 12px;
  }

  .gallery-card-footer {
    padding: 12px 16px;
    background-color: rgba(255, 255, 255, 0.02);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .status-indicator {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
    text-transform: uppercase;
  }

  .status-indicator[data-status="pending"] {
    background-color: rgba(255, 193, 7, 0.2);
    color: #ffc107;
  }

  .status-indicator[data-status="saved"] {
    background-color: rgba(40, 167, 69, 0.2);
    color: #28a745;
  }

  .status-indicator[data-status="skipped"] {
    background-color: rgba(108, 117, 125, 0.2);
    color: #6c757d;
  }

  .card-actions {
    display: flex;
    gap: 6px;
  }

  .card-actions .btn-small {
    padding: 4px 10px;
    font-size: 11px;
    border-radius: 4px;
  }

  /* Responsive pour la galerie */
  @media (max-width: 1200px) {
    .gallery-container {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 15px;
    }
  }

  @media (max-width: 768px) {
    .gallery-container {
      grid-template-columns: 1fr;
      gap: 12px;
      padding: 15px;
    }

    .gallery-modal {
      max-width: 98vw;
    }

    .global-controls-row {
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .global-input-container {
      flex-wrap: wrap;
    }

    .global-input-container .btn-small {
      width: 100%;
      margin-top: 5px;
    }
  }

  @media (max-width: 768px) {
    .form-row {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .series-input-container {
      flex-direction: column;
      align-items: stretch;
    }
    
    .details-modal {
      width: 98%;
    }
  }

  /* Bouton Rackoon Live */
  .rackoon-live-btn {
    background: linear-gradient(135deg, #ff0000, #8b0000);
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    margin-right: 15px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(255, 0, 0, 0.3);
  }

  .rackoon-live-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 0, 0, 0.5);
  }

  .rackoon-live-btn i {
    font-size: 16px;
  }

  /* ========================================
     TH√àME RACKOON LIVE - Apple Glassmorphism 2025
     ======================================== */

  body.rackoon-live {
    --glass-bg: rgba(26, 35, 50, 0.7);
    --glass-border: rgba(255, 255, 255, 0.1);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
    --accent-blue: #4A9EFF;
    --accent-blue-hover: #6BB0FF;
    --bg-primary: #0F1419;
    --bg-gradient: linear-gradient(135deg, #1a2332 0%, #0f1419 100%);
    --text-primary: #FFFFFF;
    --text-secondary: rgba(255, 255, 255, 0.7);
    --badge-green: #34C759;
    --badge-white: #FFFFFF;
  }

  /* Animation d'entr√©e du mode Live */
  @keyframes glassAppear {
    from {
      opacity: 0;
      transform: scale(0.95);
      filter: blur(10px);
    }
    to {
      opacity: 1;
      transform: scale(1);
      filter: blur(0);
    }
  }

  /* Fond principal */
  body.rackoon-live {
    background: var(--bg-gradient);
    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Navbar Glassmorphism */
  body.rackoon-live .navbar {
    background: rgba(26, 35, 50, 0.6);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border-bottom: 1px solid var(--glass-border);
    box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2);
  }

  body.rackoon-live .logo {
    color: var(--accent-blue);
    font-weight: 700;
    letter-spacing: 0.5px;
    text-shadow: none;
  }

  body.rackoon-live .nav-link {
    background: rgba(74, 158, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(74, 158, 255, 0.2);
    color: var(--text-primary);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  body.rackoon-live .nav-link:hover,
  body.rackoon-live .nav-link.active {
    background: var(--accent-blue);
    border-color: var(--accent-blue);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(74, 158, 255, 0.3);
  }

  /* Main Content */
  body.rackoon-live .main-content {
    background: transparent;
  }

  body.rackoon-live .section-header {
    padding: 40px 0 20px;
  }

  body.rackoon-live .section-header h2 {
    color: var(--text-primary);
    font-size: 32px;
    font-weight: 700;
    letter-spacing: -0.5px;
  }

  /* Glassmorphism Cards */
  body.rackoon-live .media-card {
    background: var(--glass-bg);
    backdrop-filter: blur(16px) saturate(180%);
    -webkit-backdrop-filter: blur(16px) saturate(180%);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    box-shadow: var(--glass-shadow);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    animation: glassAppear 0.6s ease-out;
  }

  body.rackoon-live .media-card:hover {
    background: rgba(26, 35, 50, 0.85);
    border-color: rgba(74, 158, 255, 0.4);
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 12px 40px rgba(74, 158, 255, 0.2),
                0 0 0 1px rgba(74, 158, 255, 0.3);
  }

  /* Thumbnail avec overlay glassmorphism */
  body.rackoon-live .media-thumbnail-container {
    border-radius: 12px;
    overflow: hidden;
    position: relative;
  }

  body.rackoon-live .media-thumbnail {
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  body.rackoon-live .media-card:hover .media-thumbnail {
    transform: scale(1.05);
  }

  body.rackoon-live .media-overlay {
    background: rgba(15, 20, 25, 0.7);
    backdrop-filter: blur(8px);
  }

  /* Boutons Glassmorphism */
  body.rackoon-live .sort-button,
  body.rackoon-live .filter-button,
  body.rackoon-live .view-toggle-button {
    background: rgba(74, 158, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(74, 158, 255, 0.25);
    color: var(--text-primary);
    border-radius: 12px;
    padding: 10px 18px;
    font-weight: 500;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  body.rackoon-live .sort-button:hover,
  body.rackoon-live .filter-button:hover,
  body.rackoon-live .view-toggle-button:hover {
    background: rgba(74, 158, 255, 0.3);
    border-color: var(--accent-blue);
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(74, 158, 255, 0.25);
  }

  /* Search Bar Glassmorphism */
  body.rackoon-live .search-filter {
    background: rgba(26, 35, 50, 0.5);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 12px;
    overflow: hidden;
  }

  body.rackoon-live .search-filter input {
    background: transparent;
    border: none;
    color: var(--text-primary);
    font-weight: 400;
  }

  body.rackoon-live .search-filter input::placeholder {
    color: var(--text-secondary);
  }

  /* Category Sections */
  body.rackoon-live .category-section {
    background: rgba(26, 35, 50, 0.3);
    backdrop-filter: blur(10px);
    border: 1px solid var(--glass-border);
    border-radius: 20px;
    border-left: 4px solid var(--accent-blue);
    padding: 24px;
    margin-bottom: 32px;
  }

  body.rackoon-live .category-title {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 24px;
    letter-spacing: -0.3px;
  }

  /* Play Button */
  body.rackoon-live .play-btn {
    background: var(--accent-blue);
    border: none;
    box-shadow: 0 4px 16px rgba(74, 158, 255, 0.4);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  body.rackoon-live .play-btn:hover {
    background: var(--accent-blue-hover);
    transform: scale(1.1);
    box-shadow: 0 6px 24px rgba(74, 158, 255, 0.6);
  }

  /* Rackoon Live Button Transform */
  body.rackoon-live .rackoon-live-btn {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    color: var(--text-primary);
    box-shadow: 0 4px 16px rgba(255, 255, 255, 0.1);
  }

  body.rackoon-live .rackoon-live-btn:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px) scale(1.05);
  }

  /* Media Title */
  body.rackoon-live .media-title {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 15px;
  }

  /* Badge Styles (vu/√† voir) */
  body.rackoon-live .media-card::after {
    content: 'Film';
    position: absolute;
    bottom: 12px;
    left: 12px;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    padding: 4px 12px;
    border-radius: 6px;
    font-size: 11px;
    font-weight: 600;
    color: white;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Scrollbar Glassmorphism */
  body.rackoon-live ::-webkit-scrollbar {
    width: 8px;
  }

  body.rackoon-live ::-webkit-scrollbar-track {
    background: rgba(26, 35, 50, 0.3);
  }

  body.rackoon-live ::-webkit-scrollbar-thumb {
    background: rgba(74, 158, 255, 0.5);
    border-radius: 4px;
  }

  body.rackoon-live ::-webkit-scrollbar-thumb:hover {
    background: var(--accent-blue);
  }
  </style>  

  <!-- Scripts -->
  <script src="../node_modules/gsap/dist/gsap.min.js"></script>

  <!-- Socket.io pour Watch Party -->
  <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>

  <script src="../js/utils.js"></script>
  <script src="../js/tabs-system.js"></script>
  <script src="../js/video-player.js"></script>

  <!-- Watch Party -->
  <script src="../js/watch-party-client.js"></script>
  <script src="../js/watch-party-ui.js"></script>

  <script src="../js/movie-modal.js"></script>
  <script src="../js/series-modal.js"></script>
  <script src="../js/import-triage.js"></script>
  <script src="../js/import-classification.js"></script>
  <script src="../js/seasons-manager.js"></script>
  <script src="../js/filters.js"></script>
  <script src="../js/dashboard.js"></script>
  <script src="../js/dashboard-categories.js"></script>
  <script src="../js/import-simple.js"></script>

  <!-- Style pour petit modal Clear All -->
  <style>
    .small-modal {
      max-width: 550px !important;
      width: 90% !important;
      max-height: 80vh !important;
      margin: auto !important;
    }
  </style>

  <!-- Syst√®me Clear All simple avec event delegation -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      console.log('üé¨ Initialisation syst√®me Clear All');

      // Event delegation sur le document entier
      document.addEventListener('click', (e) => {
        // Bouton Clear All
        if (e.target.id === 'clear-all-btn' || e.target.closest('#clear-all-btn')) {
          e.preventDefault();
          console.log('üóëÔ∏è Clic sur Clear All d√©tect√©');
          const modal = document.getElementById('clear-all-modal');
          if (modal) {
            modal.style.display = 'flex';
            modal.classList.add('active');
            console.log('‚úÖ Modal ouvert');
          } else {
            console.error('‚ùå Modal introuvable');
          }
        }

        // Fermer le modal
        if (e.target.id === 'close-clear-all-modal' || e.target.id === 'cancel-clear-all-btn') {
          const modal = document.getElementById('clear-all-modal');
          const confirmationInput = document.getElementById('clear-confirmation');
          const confirmBtn = document.getElementById('confirm-clear-all-btn');

          if (modal) {
            modal.classList.remove('active');
            setTimeout(() => {
              modal.style.display = 'none';
            }, 300);
          }
          if (confirmationInput) confirmationInput.value = '';
          if (confirmBtn) confirmBtn.disabled = true;
        }

        // Confirmer la suppression
        if (e.target.id === 'confirm-clear-all-btn') {
          handleClearAll();
        }
      });

      // Validation de la saisie
      document.addEventListener('input', (e) => {
        if (e.target.id === 'clear-confirmation') {
          const isValid = e.target.value.trim().toUpperCase() === 'CLEAR ALL';
          const confirmBtn = document.getElementById('confirm-clear-all-btn');
          if (confirmBtn) {
            confirmBtn.disabled = !isValid;
          }
        }
      });

      // Fonction de suppression
      async function handleClearAll() {
        const confirmBtn = document.getElementById('confirm-clear-all-btn');
        const modal = document.getElementById('clear-all-modal');

        try {
          console.log('üóëÔ∏è Suppression de tous les m√©dias...');

          if (confirmBtn) {
            confirmBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Suppression...';
            confirmBtn.disabled = true;
          }

          // Appeler l'API pour vider tous les m√©dias
          const result = await window.electronAPI.clearAllMedias();

          if (result.success) {
            console.log('‚úÖ Tous les m√©dias supprim√©s');
            alert('‚úÖ Tous les m√©dias ont √©t√© supprim√©s !');

            // Recharger la page pour rafra√Æchir toutes les donn√©es
            window.location.reload();
          } else {
            console.error('‚ùå Erreur:', result.message);
            alert('‚ùå Erreur: ' + result.message);
            if (confirmBtn) confirmBtn.innerHTML = 'Supprimer TOUT';
          }

          if (modal) {
            modal.classList.remove('active');
            setTimeout(() => {
              modal.style.display = 'none';
            }, 300);
          }
        } catch (error) {
          console.error('‚ùå Erreur:', error);
          alert('‚ùå Erreur: ' + error.message);
          if (confirmBtn) confirmBtn.innerHTML = 'Supprimer TOUT';
        }
      }
    });
  </script>

  <!-- Watch Party Event Listeners -->
  <script>
    // Bouton "Join Watch Party" dans la navbar
    document.getElementById('watchparty-join-btn').addEventListener('click', () => {
      console.log('üé¨ Ouverture modal Join Watch Party');
      window.watchPartyUI.showJoinModal();
    });

    // Ajouter le bouton "Create Watch Party" au lecteur vid√©o
    // (sera ajout√© dynamiquement quand une vid√©o est ouverte)
    const originalOpen = window.videoPlayer.open;
    window.videoPlayer.open = async function(...args) {
      await originalOpen.apply(this, args);

      // Ajouter le bouton Watch Party si pas d√©j√† pr√©sent
      const controls = document.querySelector('.video-controls .controls-left');
      if (controls && !document.getElementById('watchparty-create-btn')) {
        const watchPartyBtn = document.createElement('button');
        watchPartyBtn.className = 'control-btn watchparty-btn';
        watchPartyBtn.id = 'watchparty-create-btn';
        watchPartyBtn.title = 'Cr√©er une Watch Party';
        watchPartyBtn.innerHTML = '<i class="fas fa-users"></i>';

        watchPartyBtn.addEventListener('click', () => {
          console.log('üé¨ Cr√©ation Watch Party');
          const videoInfo = {
            id: window.videoPlayer.currentMovie.id,
            title: window.videoPlayer.currentMovie.title,
            path: window.videoPlayer.currentMovie.path
          };
          window.watchPartyUI.showCreateModal(videoInfo);
          window.videoPlayer.enableWatchParty();
        });

        // Ins√©rer apr√®s le bouton play/pause
        const playBtn = controls.querySelector('.play-pause-btn');
        if (playBtn) {
          playBtn.parentNode.insertBefore(watchPartyBtn, playBtn.nextSibling);
        } else {
          controls.appendChild(watchPartyBtn);
        }
      }
    };

    console.log('üé¨ Watch Party: Event listeners configur√©s');
  </script>
</body>
</html>