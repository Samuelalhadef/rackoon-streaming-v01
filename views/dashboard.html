<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rackoon Streaming</title>
  <link rel="stylesheet" href="../css/dashboard.css">
  <link rel="stylesheet" href="../css/modal.css">
  <link rel="stylesheet" href="../css/video-player.css">
  <link rel="stylesheet" href="../css/import-classification.css">
  <link rel="stylesheet" href="../css/series-modal.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <!-- Barre de navigation -->
  <nav class="navbar">
    <div class="navbar-left">
      <div class="logo">RACKOON</div>
      <div class="nav-links">
        <a href="#" class="nav-link active">
          <i class="fas fa-home"></i>
          Accueil
        </a>
        <a href="file-manager-electron.html" class="nav-link">
          <i class="fas fa-folder-open"></i>
          Gestion des fichiers
        </a>
      </div>
    </div>
    <div class="user-controls">
      <div class="user-profile">
        <span>Rackoon Streaming</span>
      </div>
    </div>
  </nav>

  <!-- Contenu principal -->
  <main class="main-content">
    <!-- Zone de chargement -->
    <div class="loading-container" id="loading-container">
      <div class="status-message" id="status-message">Pr√™t √† rechercher des vid√©os</div>
      <div class="progress-bar-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
    </div>

    <!-- Section de recherche globale -->
    <div class="section-header">
      <h2 class="section-title">Ma M√©diath√®que</h2>
      <div class="filters-search-container">
        <div class="search-filter">
          <span class="search-icon">
            <i class="fas fa-search"></i>
          </span>
          <input type="text" id="filter-search" placeholder="Rechercher un titre...">
        </div>
        <button class="filter-button" id="filter-btn">
          <span class="filter-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2">
              <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
            </svg>
          </span>
          Filtres
        </button>
      </div>
    </div>

    <!-- Cat√©gories de m√©dias -->
    <div class="categories-container">

      <!-- Cat√©gorie Films -->
      <div class="media-category" id="films-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-film"></i>
            Films
          </h3>
          <span class="category-count" id="films-count">0</span>
        </div>
        <div class="media-grid" id="films-grid">
          <div class="empty-state">
            <span class="icon">üé¨</span>
            <p>Aucun film trouv√©.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie S√©ries -->
      <div class="media-category" id="series-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-tv"></i>
            S√©ries
          </h3>
          <span class="category-count" id="series-count">0</span>
        </div>
        <div class="media-grid" id="series-grid">
          <div class="empty-state">
            <span class="icon">üì∫</span>
            <p>Aucune s√©rie trouv√©e.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie Courts m√©trages -->
      <div class="media-category" id="shorts-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-video"></i>
            Courts m√©trages
          </h3>
          <span class="category-count" id="shorts-count">0</span>
        </div>
        <div class="media-grid" id="shorts-grid">
          <div class="empty-state">
            <span class="icon">üéûÔ∏è</span>
            <p>Aucun court m√©trage trouv√©.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie Autres -->
      <div class="media-category" id="others-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-folder"></i>
            Autres
          </h3>
          <span class="category-count" id="others-count">0</span>
        </div>
        <div class="media-grid" id="others-grid">
          <div class="empty-state">
            <span class="icon">üìÅ</span>
            <p>Aucun autre m√©dia trouv√©.</p>
          </div>
        </div>
      </div>

      <!-- Cat√©gorie Non tri√©s -->
      <div class="media-category" id="unsorted-category">
        <div class="category-header">
          <h3 class="category-title">
            <i class="fas fa-question-circle"></i>
            Non tri√©s
          </h3>
          <span class="category-count" id="unsorted-count">0</span>
        </div>
        <div class="media-grid unsorted-grid" id="unsorted-grid">
          <div class="empty-state">
            <span class="icon">‚ùì</span>
            <p>Aucun fichier en attente de classification.</p>
          </div>
        </div>
      </div>

    </div>
  </main>

  <!-- Bouton d'action flottant -->
  <div class="floating-action" id="add-btn">
    <span class="plus-icon">+</span>
  </div>

  <!-- Menu flottant pour le scan -->
  <div class="floating-menu" id="scan-menu">
    <h3>Ajouter des m√©dias</h3>
    <div class="scan-actions">
      <button class="scan-btn" id="scan-folder-btn">
        <span class="icon"><i class="fas fa-folder-open"></i></span>
        Rechercher un dossier
      </button>
      <button class="scan-btn" id="scan-file-btn">
        <span class="icon"><i class="fas fa-file-video"></i></span>
        Rechercher un fichier
      </button>
    </div>
  </div>

    <!-- Template pour les cartes de films -->
    <template id="media-card-template">
      <div class="media-card" data-id="" data-title="">
        <div class="media-thumbnail-container">
          <img src="" alt="" class="media-thumbnail">
          <div class="play-overlay">
            <button class="play-btn" title="Lancer la lecture">
              <i class="fas fa-play"></i>
            </button>
          </div>
        </div>
        <div class="media-info">
          <div class="media-title-container">
            <h3 class="media-title"></h3>
            <div class="watch-top">
              <button class="btn-watch-toggle">√† voir</button>
            </div>
          </div>
          <div class="media-extended-info">
            <div class="media-duration">
              Dur√©e: <span class="duration-value"></span>
            </div>
            <div class="rating-container">
              <div class="stars-container">
                <span class="star" data-value="1"><i class="fas fa-star"></i></span>
                <span class="star" data-value="2"><i class="fas fa-star"></i></span>
                <span class="star" data-value="3"><i class="fas fa-star"></i></span>
                <span class="star" data-value="4"><i class="fas fa-star"></i></span>
                <span class="star" data-value="5"><i class="fas fa-star"></i></span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template>

  <!-- Modal de pr√©sentation du film -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="movie-modal" id="movie-modal">
      <button class="modal-close" id="modal-close">√ó</button>
      
      <!-- Mode visualisation -->
      <div class="view-mode" id="view-mode">
        <!-- Container unifi√© avec scroll unique -->
        <div class="unified-content">
          <!-- Sidebar avec affiche et √©valuation -->
          <div class="modal-sidebar">
            <!-- Affiche -->
            <div class="modal-poster">
              <img src="../public/img/default-thumbnail.svg" alt="Poster du film" id="modal-poster">
              <div class="poster-overlay">
                <div class="poster-quick-info">Note : ‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                <div class="poster-quick-info">Dur√©e : <span id="duration-quick">2h 35m</span></div>
              </div>
            </div>

            <!-- Syst√®me d'√©valuation sous l'affiche -->
            <div class="evaluation-section">
              <!-- Bouton Vu/√Ä voir -->
              <button class="btn-watch-toggle-modal" id="btn-watch-toggle-modal">√Ä voir</button>

              <!-- Syst√®me d'√©toiles -->
              <div class="rating-compact">
                <div class="rating-title">Ma Note</div>
                <div class="modal-stars">
                  <span class="modal-star" data-value="1"><i class="fas fa-star"></i></span>
                  <span class="modal-star" data-value="2"><i class="fas fa-star"></i></span>
                  <span class="modal-star" data-value="3"><i class="fas fa-star"></i></span>
                  <span class="modal-star" data-value="4"><i class="fas fa-star"></i></span>
                  <span class="modal-star" data-value="5"><i class="fas fa-star"></i></span>
                </div>
              </div>

              <!-- √âditeur d'avis -->
              <div class="review-section">
                <div class="review-title">Mon Avis</div>
                <textarea class="review-input" id="review-input" placeholder="Partage ton avis sur ce film..." rows="3"></textarea>
                <button class="review-save-btn" id="review-save-btn">Sauvegarder</button>
              </div>
            </div>
          </div>

          <!-- Contenu principal -->
          <div class="modal-content">
          <div class="modal-header">
            <div class="title-section">
              <h2 class="modal-title" id="modal-title">Le Comte de Monte Cristo</h2>
              <span class="movie-year" id="movie-year">(2024)</span>
            </div>
            <div class="action-buttons">
              <!-- Syst√®me de boutons extensibles -->
              <div class="edit-button-group" id="edit-button-group">
                <!-- Bouton annuler (gauche) -->
                <button class="edit-cancel-btn" id="edit-cancel-btn" style="display: none;">
                  <i class="fas fa-undo"></i>
                </button>

                <!-- Bouton principal (crayon) -->
                <button class="edit-button" id="edit-button">
                  <i class="fas fa-pencil-alt"></i>
                </button>

                <!-- Bouton sauvegarder (droite) -->
                <button class="edit-save-btn" id="edit-save-btn" style="display: none;">
                  <i class="fas fa-check"></i>
                </button>
              </div>
            </div>
          </div>

          <div class="movie-meta">
            <div class="release-date" id="release-date"></div>
            <div class="duration" id="duration">2h 35m</div>
            <div class="decade" id="decade"></div>
          </div>

          <!-- Nouveaux champs: Acteurs et R√©alisateur -->
          <div class="movie-credits">
            <div class="director-section" id="director-section" style="display: none;">
              <span class="credit-label">R√©alisateur :</span>
              <span class="director-name" id="director-name"></span>
            </div>
            <div class="actors-section" id="actors-section" style="display: none;">
              <span class="credit-label">Acteurs :</span>
              <span class="actors-list" id="actors-list"></span>
            </div>
            <div class="franchise-section" id="franchise-section" style="display: none;">
              <span class="credit-label">Collection :</span>
              <span class="franchise-name" id="franchise-name"></span>
            </div>
          </div>
          
          
          <!-- Syst√®me de tags organis√© par cat√©gories -->
          <div class="tags-container">
            <!-- Genres -->
            <div class="tag-category" id="genres-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-film"></i>
                <span class="tag-category-title">Genres</span>
              </div>
              <div class="tag-chips" id="genres-container"></div>
            </div>

            <!-- Ambiance/Mood -->
            <div class="tag-category" id="mood-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-heart"></i>
                <span class="tag-category-title">Ambiance</span>
              </div>
              <div class="tag-chips" id="mood-container"></div>
            </div>

            <!-- Technique -->
            <div class="tag-category" id="technical-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-cog"></i>
                <span class="tag-category-title">Technique</span>
              </div>
              <div class="tag-chips" id="technical-container"></div>
            </div>

            <!-- Personnel -->
            <div class="tag-category" id="personal-category" style="display: none;">
              <div class="tag-category-header">
                <i class="fas fa-user"></i>
                <span class="tag-category-title">Personnel</span>
              </div>
              <div class="tag-chips" id="personal-container"></div>
            </div>
          </div>
          
          <div class="synopsis">
            <h3 class="synopsis-title">Synopsis</h3>
            <div class="synopsis-content" id="synopsis-content"></div>
          </div>


          <div class="modal-actions">
            <button class="btn-watch-film" id="btn-watch-film">Regarder le film</button>
          </div>
          </div>
        </div>
      </div>
      
      <!-- Mode √©dition (initialement cach√©) -->
      <div class="edit-mode" id="edit-mode" style="display: none;">
        <div class="modal-content">
          <!-- Titre du mode √©dition -->
          <div class="edit-header">
            <h2>Sortir du mode √©dition</h2>
          </div>
          
          <!-- Bouton de recherche sur TMDB -->
          <button class="tmdb-search-btn" id="tmdb-search-btn">
            <i class="fas fa-search"></i> Rechercher sur The Movie Database
          </button>
          
          <!-- Titre -->
          <div class="edit-section">
            <div class="edit-section-title">Nom</div>
            <div class="edit-field">
              <input type="text" id="edit-title-input" placeholder="Titre du film">
            </div>
          </div>
          
          <!-- Ann√©e et date de sortie -->
          <div class="edit-section">
            <div class="edit-section-title">Date de sortie</div>
            <div class="edit-field">
              <input type="date" id="edit-release-date" placeholder="Date de sortie">
            </div>
          </div>
          
          <!-- Genres -->
          <div class="edit-section">
            <div class="edit-section-title">Genres</div>
            <!-- Genres pr√©d√©finis -->
            <div class="edit-field genre-selection">
              <select class="genre-dropdown" id="genre-dropdown">
                <option value="">Choisir un genre</option>
                <option value="Action">Action</option>
                <option value="Aventure">Aventure</option>
                <option value="Animation">Animation</option>
                <option value="Com√©die">Com√©die</option>
                <option value="Crime">Crime</option>
                <option value="Documentaire">Documentaire</option>
                <option value="Drame">Drame</option>
                <option value="Famille">Famille</option>
                <option value="Fantastique">Fantastique</option>
                <option value="Histoire">Histoire</option>
                <option value="Horreur">Horreur</option>
                <option value="Musique">Musique</option>
                <option value="Myst√®re">Myst√®re</option>
                <option value="Romance">Romance</option>
                <option value="Science-Fiction">Science-Fiction</option>
                <option value="Thriller">Thriller</option>
                <option value="Guerre">Guerre</option>
                <option value="Western">Western</option>
              </select>
              <button class="add-genre-btn" id="add-predefined-genre">Ajouter</button>
            </div>
            
            <!-- Affichage des genres s√©lectionn√©s -->
            <div class="genres-edit" id="edit-genres-container">
              <!-- Les genres seront ajout√©s ici dynamiquement -->
            </div>
            
            <!-- Ajout de genres personnalis√©s -->
            <div class="add-genre-container">
              <input type="text" class="add-genre-input" id="custom-genre-input" placeholder="Genre personnalis√©">
              <button class="add-genre-btn" id="add-custom-genre">Ajouter</button>
            </div>
          </div>

          <!-- Syst√®me de tags avanc√© -->
          <div class="edit-section">
            <div class="edit-section-title">
              <i class="fas fa-tags"></i> Tags personnalis√©s
            </div>

            <!-- Tags par cat√©gories -->
            <div class="edit-tags-container">
              <!-- Ambiance/Mood Tags -->
              <div class="edit-tag-category">
                <div class="edit-tag-category-header">
                  <i class="fas fa-heart"></i>
                  <span>Ambiance</span>
                  <button class="add-tag-btn" data-category="mood">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="edit-tag-chips" id="edit-mood-tags"></div>
                <div class="add-tag-form" style="display: none;">
                  <input type="text" class="tag-input" placeholder="Nouveau tag d'ambiance...">
                  <button class="confirm-tag-btn"><i class="fas fa-check"></i></button>
                  <button class="cancel-tag-btn"><i class="fas fa-times"></i></button>
                </div>
              </div>

              <!-- Technical Tags -->
              <div class="edit-tag-category">
                <div class="edit-tag-category-header">
                  <i class="fas fa-cog"></i>
                  <span>Technique</span>
                  <button class="add-tag-btn" data-category="technical">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="edit-tag-chips" id="edit-technical-tags"></div>
                <div class="add-tag-form" style="display: none;">
                  <input type="text" class="tag-input" placeholder="Nouveau tag technique...">
                  <button class="confirm-tag-btn"><i class="fas fa-check"></i></button>
                  <button class="cancel-tag-btn"><i class="fas fa-times"></i></button>
                </div>
              </div>

              <!-- Personal Tags -->
              <div class="edit-tag-category">
                <div class="edit-tag-category-header">
                  <i class="fas fa-user"></i>
                  <span>Personnel</span>
                  <button class="add-tag-btn" data-category="personal">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
                <div class="edit-tag-chips" id="edit-personal-tags"></div>
                <div class="add-tag-form" style="display: none;">
                  <input type="text" class="tag-input" placeholder="Nouveau tag personnel...">
                  <button class="confirm-tag-btn"><i class="fas fa-check"></i></button>
                  <button class="cancel-tag-btn"><i class="fas fa-times"></i></button>
                </div>
              </div>
            </div>
          </div>

          <!-- Image -->
          <div class="edit-section">
            <div class="edit-section-title">Image</div>
            <div class="image-upload-container">
              <img src="../public/img/default-thumbnail.svg" class="image-upload-preview" id="image-preview">
              <div class="image-upload-controls">
                <button class="image-upload-btn" id="upload-image-btn">Changer l'image</button>
              </div>
            </div>
          </div>
          
          <!-- Synopsis -->
          <div class="edit-section">
            <div class="edit-section-title">Synopsis</div>
            <div class="edit-field">
              <textarea id="edit-synopsis-input" placeholder="Synopsis du film"></textarea>
            </div>
          </div>
          
          <!-- Boutons d'action -->
          <button class="save-changes-btn" id="save-changes-btn">Enregistrer les modifications</button>
          <button class="exit-edit-mode" id="exit-edit-mode">Sortir du mode √©dition</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de pr√©sentation des s√©ries -->
  <div class="modal-overlay" id="series-modal-overlay" style="display: none;">
    <div class="series-modal" id="series-modal">
      <button class="modal-close" id="series-modal-close">√ó</button>

      <!-- Section poster (colonne gauche) -->
      <div class="series-poster-section">
        <img class="series-poster" id="series-poster" src="" alt="Poster de la s√©rie">
      </div>

      <!-- Section contenu (colonne droite) -->
      <div class="series-content">
        <!-- En-t√™te avec titre et ann√©e -->
        <div class="series-header">
          <h2 class="series-title" id="series-title"></h2>
          <span class="series-year" id="series-year"></span>
        </div>

        <!-- M√©tadonn√©es -->
        <div class="series-meta">
          <span class="series-episode-count" id="series-episode-count"></span>
        </div>

        <!-- Description -->
        <div class="series-description" id="series-description"></div>

        <!-- Actions -->
        <div class="series-actions">
          <button class="btn-play-series" id="btn-play-series">
            <i class="fas fa-play"></i> Lire la s√©rie
          </button>
          <button class="btn-edit-series" id="btn-edit-series">
            <i class="fas fa-edit"></i> Modifier
          </button>
        </div>

        <!-- Liste des saisons et √©pisodes -->
        <div class="seasons-container" id="seasons-container">
          <!-- Les saisons seront ajout√©es dynamiquement -->
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les saisons -->
  <template id="season-template">
    <div class="season-section">
      <div class="season-header">
        <h3 class="season-title">Saison <span class="season-number"></span></h3>
        <span class="season-episode-count"></span>
      </div>
      <div class="episodes-grid">
        <!-- Les √©pisodes seront ajout√©s ici -->
      </div>
    </div>
  </template>

  <!-- Template pour les √©pisodes -->
  <template id="episode-template">
    <div class="episode-card" data-episode-id="">
      <div class="episode-thumbnail-container">
        <img class="episode-thumbnail" src="" alt="Miniature √©pisode">
        <div class="episode-duration"></div>
        <button class="episode-play-btn">
          <i class="fas fa-play"></i>
        </button>
      </div>
      <div class="episode-info">
        <div class="episode-number"></div>
        <div class="episode-title"></div>
        <div class="episode-meta">
          <span class="episode-date"></span>
        </div>
      </div>
    </div>
  </template>

  <!-- Modal de tri initial des m√©dias import√©s -->
  <div id="import-triage-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content">
      <div class="import-modal-header">
        <h2>Tri des m√©dias import√©s</h2>
        <span class="import-modal-count" id="triage-count">0 fichiers trouv√©s</span>
      </div>

      <div class="import-modal-body">
        <!-- Contr√¥les globaux pour le triage -->
        <div class="triage-global-controls">
          <div class="global-controls-section">
            <h4>Appliquer √† tous :</h4>
            <div class="global-controls-row">
              <div class="global-control-group">
                <label>Type de m√©dia</label>
                <div class="global-input-container">
                  <select class="form-control" id="global-triage-type">
                    <option value="">S√©lectionner un type</option>
                    <option value="film">üé¨ Film</option>
                    <option value="series">üì∫ S√©rie</option>
                    <option value="short">üéûÔ∏è Court m√©trage</option>
                    <option value="other">üìÅ Autre</option>
                    <option value="unsorted">‚ùì Non tri√©</option>
                  </select>
                  <button type="button" class="btn-small btn-primary" id="apply-global-triage-type">Appliquer</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Barre de gestion des s√©ries -->
        <div class="series-batch-control" id="series-batch-control" style="display: none;">
          <div class="series-batch-header">
            <h4>üì∫ Gestion group√©e des s√©ries</h4>
            <p>Appliquer une s√©rie √† tous les m√©dias en attente de s√©lection</p>
          </div>
          <div class="series-batch-controls">
            <div class="series-selector-group">
              <select id="batch-series-selector" class="batch-series-select">
                <option value="">S√©lectionner une s√©rie existante...</option>
              </select>
              <button type="button" class="btn-small btn-secondary new-series-batch-btn" id="new-series-batch-btn" title="Cr√©er une nouvelle s√©rie">
                <i class="fas fa-plus"></i> Nouvelle s√©rie
              </button>
            </div>
            <button type="button" class="btn-primary batch-apply-btn" id="batch-apply-series">
              Appliquer √† <span id="pending-series-count">0</span> m√©dias
            </button>
          </div>
        </div>

        <div class="import-table-container">
          <table class="import-table" id="triage-table">
            <thead>
              <tr>
                <th>Aper√ßu</th>
                <th>Nom du fichier</th>
                <th>Dur√©e</th>
                <th>Taille</th>
                <th>Type de m√©dia</th>
                <th>Mode de tri</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="triage-table-body">
              <!-- Les lignes seront ajout√©es dynamiquement -->
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="skip-all-triage-btn">Tout passer (m√©dias non tri√©s)</button>
          <button class="btn-primary" id="validate-triage-btn">Valider et continuer la classification</button>
        </div>
        <div class="import-progress" id="triage-progress" style="display: none;">
          <div class="progress-bar">
            <div class="progress-fill" id="triage-progress-fill"></div>
          </div>
          <span class="progress-text" id="triage-progress-text">Traitement en cours...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les lignes du tableau de tri -->
  <template id="triage-row-template">
    <tr class="import-row" data-file-index="">
      <td class="thumbnail-cell">
        <div class="file-thumbnail">
          <img src="" alt="" class="thumbnail-preview">
        </div>
      </td>
      <td class="filename-cell">
        <div class="filename-info">
          <span class="filename-title"></span>
          <span class="filename-path"></span>
        </div>
      </td>
      <td class="duration-cell">
        <span class="duration-value">--:--:--</span>
      </td>
      <td class="size-cell">
        <span class="size-value">-- MB</span>
      </td>
      <td class="type-cell">
        <select class="type-selector">
          <option value="unsorted">√Ä d√©finir plus tard</option>
          <option value="film">üé¨ Film</option>
          <option value="series">üì∫ S√©rie</option>
          <option value="short">üéûÔ∏è Court m√©trage</option>
          <option value="other">üìÅ Autre</option>
        </select>
      </td>
      <td class="sort-mode-cell">
        <div class="sort-mode-container">
          <input type="text" class="sort-mode-input" value="Non d√©fini" readonly disabled>
          <div class="series-fields" style="display: none;">
            <div class="series-name-row">
              <select class="series-name-selector">
                <option value="">S√©lectionner une s√©rie</option>
              </select>
              <button type="button" class="btn-small btn-primary new-series-btn" title="Cr√©er une nouvelle s√©rie">üÜï</button>
            </div>
            <div class="validation-error" style="display: none;">
              <span class="error-icon">‚ö†Ô∏è</span>
              <span class="error-text">Nom de s√©rie requis</span>
            </div>
          </div>
        </div>
      </td>
      <td class="actions-cell">
        <button class="btn-small btn-outline quick-skip" title="Passer ce fichier" data-action="skip">Passer</button>
      </td>
    </tr>
  </template>

  <!-- Modal Phase 1 : Tri par type - √Ä ajouter dans dashboard.html -->
  <div id="import-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content">
      <div class="import-modal-header">
        <h2>Classification des m√©dias import√©s</h2>
        <span class="import-modal-count" id="import-count">0 fichiers trouv√©s</span>
      </div>
      
      <div class="import-modal-body">
        <div class="import-table-container">
          <table class="import-table" id="import-table">
            <thead>
              <tr>
                <th>Aper√ßu</th>
                <th>Nom du fichier</th>
                <th>Dur√©e</th>
                <th>Taille</th>
                <th>Type</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="import-table-body">
              <!-- Les lignes seront ajout√©es dynamiquement -->
            </tbody>
          </table>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="skip-all-btn">Tout passer (non tri√©)</button>
          <button class="btn-primary" id="validate-import-btn">Valider la s√©lection</button>
        </div>
        <div class="import-progress" id="import-progress" style="display: none;">
          <div class="progress-bar">
            <div class="progress-fill" id="import-progress-fill"></div>
          </div>
          <span class="progress-text" id="import-progress-text">Enregistrement en cours...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les lignes du tableau -->
  <template id="import-row-template">
    <tr class="import-row" data-file-index="">
      <td class="thumbnail-cell">
        <div class="file-thumbnail">
          <img src="" alt="" class="thumbnail-preview">
        </div>
      </td>
      <td class="filename-cell">
        <div class="filename-info">
          <span class="filename-title"></span>
          <span class="filename-path"></span>
        </div>
      </td>
      <td class="duration-cell">
        <span class="duration-value">--:--:--</span>
      </td>
      <td class="size-cell">
        <span class="size-value">-- MB</span>
      </td>
      <td class="type-cell">
        <select class="type-selector">
          <option value="unsorted">√Ä d√©finir</option>
          <option value="film">üé¨ Film</option>
          <option value="series">üì∫ S√©rie</option>
          <option value="short">üéûÔ∏è Court m√©trage</option>
          <option value="other">üìÅ Autre</option>
        </select>
      </td>
      <td class="actions-cell">
        <button class="btn-small btn-outline quick-skip" title="Passer ce fichier">Passer</button>
      </td>
    </tr>
  </template>

  <!-- Modal Galerie : Classification en mode galerie -->
  <div id="gallery-classification-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content gallery-modal">
      <div class="import-modal-header">
        <button class="btn-back" id="back-to-triage-btn" title="Retour au tri">
          <i class="fas fa-arrow-left"></i>
        </button>
        <h2>Classification des m√©dias</h2>
        <div class="gallery-stats">
          <span id="gallery-count">0 fichiers</span>
          <span class="separator">‚Ä¢</span>
          <span id="gallery-progress">0 classifi√©s</span>
        </div>
      </div>

      <div class="import-modal-body gallery-body">
        <!-- Contr√¥les globaux -->
        <div class="gallery-global-controls">
          <div class="global-controls-section">
            <h4>Appliquer √† tous :</h4>
            <div class="global-controls-row">
              <div class="global-control-group" id="global-series-group" style="display: none;">
                <div class="series-info-notice">
                  <i class="fas fa-info-circle"></i>
                  <span>Les s√©ries sont d√©finies lors du triage initial et ne peuvent pas √™tre modifi√©es ici.</span>
                </div>
              </div>

              <div class="global-control-group">
                <label>Ann√©e</label>
                <div class="global-input-container">
                  <input type="number" class="form-control" id="global-year-input" placeholder="2024" min="1900" max="2030">
                  <button type="button" class="btn-small btn-primary" id="apply-global-year">Appliquer</button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="gallery-container" id="gallery-container">
          <!-- Les cartes de fichiers seront ajout√©es ici -->
        </div>
      </div>

      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="save-all-unsorted-btn">Tout enregistrer comme non tri√©s</button>
          <button class="btn-primary" id="finish-classification-btn">Terminer la classification</button>
          <button class="btn-danger" id="cancel-import-btn">
            <i class="fas fa-times"></i> Annuler l'import
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Template pour les cartes de la galerie -->
  <template id="gallery-card-template">
    <div class="gallery-card" data-file-index="">
      <div class="gallery-card-header">
        <div class="file-preview">
          <img src="../public/img/default-thumbnail.svg" alt="" class="preview-image">
          <div class="file-info-overlay">
            <span class="file-name"></span>
            <span class="file-duration"></span>
          </div>
          <div class="file-category-badge">
            <span class="category-badge"></span>
          </div>
        </div>
      </div>

      <div class="gallery-card-body">
        <div class="form-group">
          <label>Titre *</label>
          <input type="text" class="form-control title-input" placeholder="Titre du m√©dia" required>
        </div>


        <div class="series-fields" style="display: none;">
          <div class="form-group">
            <label>S√©rie</label>
            <input type="text" class="form-control series-name-readonly" readonly>
            <small class="form-hint">üì∫ S√©rie d√©finie lors du tri initial</small>
          </div>

          <div class="form-group-row">
            <div class="form-group">
              <label>Saison</label>
              <input type="number" class="form-control season-input" placeholder="1" min="1">
            </div>
            <div class="form-group">
              <label>√âpisode</label>
              <input type="number" class="form-control episode-input" placeholder="1" min="1">
            </div>
          </div>
        </div>

        <div class="form-group">
          <label>Ann√©e</label>
          <input type="number" class="form-control year-input" placeholder="2024" min="1900" max="2030">
        </div>
      </div>

      <div class="gallery-card-footer">
        <div class="card-status">
          <span class="status-indicator" data-status="pending">En attente</span>
        </div>
        <div class="card-actions">
          <button class="btn-small btn-outline skip-btn">Passer</button>
          <button class="btn-small btn-primary save-btn">Enregistrer</button>
        </div>
      </div>
    </div>
  </template>

  <!-- Modal Phase 2 : Classification d√©taill√©e (s√©ries, m√©tadonn√©es) -->
  <div id="details-classification-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content details-modal">
      <div class="import-modal-header">
        <h2>Classification d√©taill√©e</h2>
        <div class="file-info">
          <span id="detail-file-name">Nom du fichier</span>
        </div>
      </div>
      
      <div class="import-modal-body details-body">
        <div class="details-form">
          <div class="form-row">
            <div class="form-group">
              <label for="detail-title">Titre *</label>
              <input type="text" id="detail-title" class="form-control" placeholder="Titre du m√©dia" required>
            </div>
            <div class="form-group">
              <label for="detail-category">Cat√©gorie *</label>
              <select id="detail-category" class="form-control" required>
                <option value="">S√©lectionner une cat√©gorie</option>
              </select>
            </div>
          </div>

          <div class="form-row" id="series-section" style="display: none;">
            <div class="form-group">
              <label for="detail-series-name">S√©rie</label>
              <input type="text" id="detail-series-name" class="form-control series-readonly" readonly>
              <small class="form-hint">üì∫ S√©rie d√©finie lors du tri initial (non modifiable)</small>
            </div>
            <div class="form-group">
              <label for="detail-season">Saison</label>
              <input type="number" id="detail-season" class="form-control" placeholder="1" min="1">
            </div>
            <div class="form-group">
              <label for="detail-episode">√âpisode</label>
              <input type="number" id="detail-episode" class="form-control" placeholder="1" min="1">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="detail-year">Ann√©e</label>
              <input type="number" id="detail-year" class="form-control" placeholder="2023" min="1900" max="2030">
            </div>
            <div class="form-group">
              <label for="detail-release-date">Date de sortie</label>
              <input type="date" id="detail-release-date" class="form-control">
            </div>
          </div>

          <div class="form-group">
            <label for="detail-description">Description</label>
            <textarea id="detail-description" class="form-control" rows="3" placeholder="Description du m√©dia (optionnel)"></textarea>
          </div>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="skip-file-btn">Passer ce fichier</button>
          <div class="navigation-buttons">
            <button class="btn-outline" id="prev-file-btn" title="Fichier pr√©c√©dent">‚Üê Pr√©c√©dent</button>
            <button class="btn-primary" id="save-file-btn">Enregistrer</button>
            <button class="btn-outline" id="next-file-btn" title="Fichier suivant">Suivant ‚Üí</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal pour nouvelle s√©rie -->
  <div id="new-series-modal" class="import-modal" style="display: none;">
    <div class="import-modal-content small-modal">
      <div class="import-modal-header">
        <h3>Cr√©er une nouvelle s√©rie</h3>
      </div>
      
      <div class="import-modal-body">
        <div class="form-group">
          <label for="new-series-name">Nom de la s√©rie *</label>
          <input type="text" id="new-series-name" class="form-control" placeholder="Ex: Breaking Bad" required>
        </div>
        <div class="form-group">
          <label for="new-series-description">Description</label>
          <textarea id="new-series-description" class="form-control" rows="2" placeholder="Description de la s√©rie (optionnel)"></textarea>
        </div>
      </div>
      
      <div class="import-modal-footer">
        <div class="import-actions">
          <button class="btn-secondary" id="cancel-series-btn">Annuler</button>
          <button class="btn-primary" id="create-series-btn">Cr√©er</button>
        </div>
      </div>
    </div>
  </div>

  <!-- CSS pour la modal -->
  <style>
  .import-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .import-modal-content {
    background-color: #081029;
    border-radius: 15px;
    width: 95%;
    max-width: 1200px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .import-modal-header {
    padding: 25px 30px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .import-modal-header h2 {
    color: #ffffff;
    font-size: 24px;
    font-weight: 600;
    margin: 0;
  }

  .import-modal-count {
    color: #b0b0b0;
    font-size: 14px;
    background-color: rgba(255, 255, 255, 0.1);
    padding: 6px 12px;
    border-radius: 12px;
  }

  .import-modal-body {
    flex: 1;
    overflow: hidden;
    padding: 20px 30px;
  }

  .import-table-container {
    height: 100%;
    overflow-y: auto;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .import-table {
    width: 100%;
    border-collapse: collapse;
    background-color: rgba(255, 255, 255, 0.05);
  }

  .import-table th {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    font-weight: 600;
    padding: 15px 12px;
    text-align: left;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    position: sticky;
    top: 0;
    z-index: 10;
  }

  .import-table td {
    padding: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    color: #e0e0e0;
  }

  .import-row:hover {
    background-color: rgba(255, 255, 255, 0.05);
  }

  .file-thumbnail {
    width: 60px;
    height: 40px;
    border-radius: 4px;
    overflow: hidden;
    background-color: #2a2a3e;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .thumbnail-preview {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .filename-info {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }

  .filename-title {
    font-weight: 500;
    color: #ffffff;
  }

  .filename-path {
    font-size: 12px;
    color: #a0a0a0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 200px;
  }

  .type-selector {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    cursor: pointer;
    min-width: 140px;
  }

  .type-selector:focus {
    outline: none;
    border-color: #3474db;
  }

  .type-selector option {
    background-color: #081029;
    color: #ffffff;
  }

  .btn-small {
    padding: 6px 12px;
    font-size: 12px;
    border-radius: 4px;
    cursor: pointer;
    border: none;
    transition: all 0.3s;
  }

  .btn-outline {
    background-color: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
  }

  .btn-outline:hover {
    background-color: rgba(255, 255, 255, 0.1);
  }

  .import-modal-footer {
    padding: 25px 30px;
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .import-actions {
    display: flex;
    gap: 15px;
  }

  .btn-secondary {
    background-color: rgba(255, 255, 255, 0.1);
    color: #ffffff;
    border: 1px solid rgba(255, 255, 255, 0.2);
    padding: 10px 20px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
  }

  .btn-secondary:hover {
    background-color: rgba(255, 255, 255, 0.15);
  }

  .btn-primary {
    background-color: #3474db;
    color: #ffffff;
    border: none;
    padding: 10px 25px;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: all 0.3s;
  }

  .btn-primary:hover {
    background-color: #2a5db3;
  }

  .import-progress {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .progress-bar {
    width: 200px;
    height: 6px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    overflow: hidden;
  }

  .progress-fill {
    height: 100%;
    background-color: #3474db;
    width: 0%;
    transition: width 0.3s ease;
  }

  .progress-text {
    color: #b0b0b0;
    font-size: 14px;
    white-space: nowrap;
  }

  /* Styles pour les nouveaux champs de tri */
  .sort-mode-cell {
    min-width: 180px;
    vertical-align: top;
  }

  .sort-mode-container {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .sort-mode-input {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 13px;
    cursor: not-allowed;
  }

  .sort-mode-input:disabled {
    opacity: 0.7;
    background-color: rgba(255, 255, 255, 0.03);
  }

  .series-fields {
    margin-top: 8px;
    padding: 10px;
    background-color: rgba(255, 255, 255, 0.05);
    border-radius: 6px;
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .series-name-row {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-bottom: 8px;
  }

  .series-name-selector {
    flex: 1;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 13px;
    cursor: pointer;
  }

  .series-name-selector:focus {
    outline: none;
    border-color: #3474db;
  }

  .series-name-selector option {
    background-color: #081029;
    color: #ffffff;
  }

  .new-series-btn {
    padding: 6px 10px;
    font-size: 12px;
    white-space: nowrap;
  }

  .series-selector-group {
    display: flex;
    gap: 10px;
    align-items: center;
    flex: 1;
  }

  .batch-series-select {
    flex: 1;
    min-width: 200px;
  }

  .new-series-batch-btn {
    padding: 8px 12px;
    font-size: 13px;
    white-space: nowrap;
    background-color: #6c757d;
    border: 1px solid #5a6268;
  }

  .new-series-batch-btn:hover {
    background-color: #5a6268;
    border-color: #4e555b;
  }

  .validation-error {
    display: flex;
    align-items: center;
    gap: 6px;
    color: #ff6b6b;
    font-size: 12px;
    font-weight: 500;
  }

  .error-icon {
    font-size: 14px;
  }

  .error-text {
    flex: 1;
  }

  /* Animation de vibration pour les erreurs */
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }

  .import-row.error-shake {
    animation: shake 0.5s ease-in-out;
  }

  .import-row.error-highlight {
    background-color: rgba(255, 107, 107, 0.1);
    border-left: 3px solid #ff6b6b;
  }

  /* Responsive */
  @media (max-width: 1024px) {
    .import-modal-content {
      width: 98%;
      max-height: 95vh;
    }
    
    .import-table {
      font-size: 14px;
    }
    
    .filename-path {
      max-width: 150px;
    }
  }

  @media (max-width: 768px) {
    .import-modal-header {
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }
    
    .import-modal-footer {
      flex-direction: column;
      gap: 15px;
      align-items: stretch;
    }
    
    .import-actions {
      justify-content: center;
    }
  }

  /* Styles pour la modal de classification d√©taill√©e */
  .details-modal {
    max-width: 800px;
  }

  .details-body {
    overflow-y: auto;
  }

  .details-form {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .form-row.three-columns {
    grid-template-columns: 1fr 1fr 1fr;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-group label {
    color: #ffffff;
    font-size: 14px;
    font-weight: 500;
  }

  .form-control {
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 6px;
    padding: 10px 12px;
    color: #ffffff;
    font-size: 14px;
    transition: all 0.3s;
  }

  .form-control:focus {
    outline: none;
    border-color: #3474db;
    background-color: rgba(255, 255, 255, 0.15);
  }

  .form-control::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }

  .series-input-container {
    display: flex;
    gap: 10px;
    align-items: flex-end;
  }

  .series-input-container .form-control {
    flex: 1;
  }

  .file-info {
    background-color: rgba(255, 255, 255, 0.1);
    padding: 8px 12px;
    border-radius: 6px;
    font-size: 14px;
    color: #b0b0b0;
  }

  #series-section {
    border-top: 1px solid rgba(255, 255, 255, 0.1);
    padding-top: 20px;
    margin-top: 10px;
  }

  .small-modal {
    max-width: 500px;
  }

  .btn-small {
    padding: 6px 12px;
    font-size: 12px;
    white-space: nowrap;
  }

  .btn-outline {
    background-color: transparent;
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #ffffff;
  }

  .btn-outline:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
  }

  /* Styles pour les boutons de navigation */
  .navigation-buttons {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  #prev-file-btn, #next-file-btn {
    padding: 8px 16px;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s;
    border: 1px solid rgba(255, 255, 255, 0.3);
    background-color: transparent;
    color: #ffffff;
  }

  #prev-file-btn:hover, #next-file-btn:hover {
    background-color: rgba(255, 255, 255, 0.1);
    border-color: rgba(255, 255, 255, 0.5);
  }

  #prev-file-btn:disabled, #next-file-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: transparent;
    border-color: rgba(255, 255, 255, 0.1);
  }

  #prev-file-btn:disabled:hover, #next-file-btn:disabled:hover {
    background-color: transparent;
    border-color: rgba(255, 255, 255, 0.1);
  }

  /* Styles pour la modal galerie */
  .gallery-modal {
    max-width: 95vw;
    max-height: 95vh;
  }

  .gallery-stats {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #b0b0b0;
    font-size: 14px;
  }

  .separator {
    color: rgba(255, 255, 255, 0.3);
  }

  .gallery-body {
    overflow-y: auto;
    max-height: 70vh;
  }

  /* Contr√¥les globaux (galerie et triage) */
  .gallery-global-controls,
  .triage-global-controls {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    padding: 20px;
    margin: 20px 20px 0 20px;
    position: sticky;
    top: 0;
    z-index: 10;
    backdrop-filter: blur(10px);
  }

  .global-controls-section h4 {
    color: #ffffff;
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .global-controls-section h4::before {
    content: "‚ö°";
    font-size: 18px;
  }

  .global-controls-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    align-items: end;
  }

  .global-control-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .global-control-group label {
    color: #ffffff;
    font-size: 13px;
    font-weight: 500;
  }

  .global-input-container {
    display: flex;
    gap: 8px;
    align-items: stretch;
  }

  .global-input-container .form-control {
    flex: 1;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    padding: 8px 10px;
    color: #ffffff;
    font-size: 13px;
  }

  .global-input-container .form-control:focus {
    outline: none;
    border-color: #3474db;
    background-color: rgba(255, 255, 255, 0.15);
  }

  .global-input-container .btn-small {
    padding: 8px 12px;
    font-size: 12px;
    white-space: nowrap;
    border-radius: 4px;
    font-weight: 500;
  }

  .gallery-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 20px;
    padding: 20px;
  }

  .gallery-card {
    background-color: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s;
    position: relative;
  }

  .gallery-card:hover {
    border-color: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
  }

  .gallery-card-header {
    position: relative;
    height: 120px;
    background-color: rgba(255, 255, 255, 0.02);
  }

  .file-preview {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .preview-image {
    width: 80px;
    height: 60px;
    object-fit: cover;
    border-radius: 6px;
    opacity: 0.7;
  }

  .file-info-overlay {
    position: absolute;
    bottom: 8px;
    left: 8px;
    right: 8px;
    background-color: rgba(0, 0, 0, 0.7);
    padding: 6px 8px;
    border-radius: 4px;
    font-size: 12px;
  }

  .file-name {
    display: block;
    color: #ffffff;
    font-weight: 500;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .file-duration {
    display: block;
    color: #b0b0b0;
    font-size: 11px;
  }

  .file-category-badge {
    position: absolute;
    top: 8px;
    right: 8px;
  }

  .category-badge {
    background-color: rgba(52, 116, 219, 0.9);
    color: #ffffff;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
    white-space: nowrap;
  }

  .category-badge.series {
    background-color: rgba(220, 53, 69, 0.9);
  }

  .category-badge.film {
    background-color: rgba(40, 167, 69, 0.9);
  }

  .category-badge.short {
    background-color: rgba(255, 193, 7, 0.9);
    color: #000;
  }

  .category-badge.other {
    background-color: rgba(108, 117, 125, 0.9);
  }

  .gallery-card-body {
    padding: 16px;
  }

  .gallery-card .form-group {
    margin-bottom: 12px;
  }

  .gallery-card .form-group label {
    display: block;
    color: #ffffff;
    font-size: 12px;
    font-weight: 500;
    margin-bottom: 4px;
  }

  .gallery-card .form-control {
    width: 100%;
    background-color: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 4px;
    padding: 6px 8px;
    color: #ffffff;
    font-size: 13px;
  }

  .gallery-card .form-control:focus {
    outline: none;
    border-color: #3474db;
    background-color: rgba(255, 255, 255, 0.15);
  }

  .form-group-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }

  .series-input-container {
    display: flex;
    gap: 6px;
    align-items: flex-end;
  }

  .series-input-container .form-control {
    flex: 1;
  }

  .series-input-container .btn-small {
    padding: 6px 8px;
    font-size: 12px;
  }

  .gallery-card-footer {
    padding: 12px 16px;
    background-color: rgba(255, 255, 255, 0.02);
    border-top: 1px solid rgba(255, 255, 255, 0.05);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .status-indicator {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 500;
    text-transform: uppercase;
  }

  .status-indicator[data-status="pending"] {
    background-color: rgba(255, 193, 7, 0.2);
    color: #ffc107;
  }

  .status-indicator[data-status="saved"] {
    background-color: rgba(40, 167, 69, 0.2);
    color: #28a745;
  }

  .status-indicator[data-status="skipped"] {
    background-color: rgba(108, 117, 125, 0.2);
    color: #6c757d;
  }

  .card-actions {
    display: flex;
    gap: 6px;
  }

  .card-actions .btn-small {
    padding: 4px 10px;
    font-size: 11px;
    border-radius: 4px;
  }

  /* Responsive pour la galerie */
  @media (max-width: 1200px) {
    .gallery-container {
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 15px;
    }
  }

  @media (max-width: 768px) {
    .gallery-container {
      grid-template-columns: 1fr;
      gap: 12px;
      padding: 15px;
    }

    .gallery-modal {
      max-width: 98vw;
    }

    .global-controls-row {
      grid-template-columns: 1fr;
      gap: 15px;
    }

    .global-input-container {
      flex-wrap: wrap;
    }

    .global-input-container .btn-small {
      width: 100%;
      margin-top: 5px;
    }
  }

  @media (max-width: 768px) {
    .form-row {
      grid-template-columns: 1fr;
      gap: 15px;
    }
    
    .series-input-container {
      flex-direction: column;
      align-items: stretch;
    }
    
    .details-modal {
      width: 98%;
    }
  }
  </style>  

  <!-- Scripts -->
  <script src="../js/utils.js"></script>
  <script src="../js/video-player.js"></script>
  <script src="../js/movie-modal.js"></script>
  <script src="../js/series-modal.js"></script>
  <script src="../js/import-triage.js"></script>
  <script src="../js/import-classification.js"></script>
  <script src="../js/dashboard.js"></script>
  <script src="../js/dashboard-categories.js"></script>
  <script src="../js/import-simple.js"></script>
</body>
</html>